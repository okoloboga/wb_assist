# üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã —Å –∫–æ–º–∏—Å—Å–∏—è–º–∏

## ‚ùå **–ü—Ä–æ–±–ª–µ–º–∞:**
–ü—Ä–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –∑–∞–∫–∞–∑–æ–≤ –∫–æ–º–∏—Å—Å–∏–∏ –Ω–µ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–ª–∏—Å—å –∏–∑-–∑–∞:
1. –î—É–±–ª–∏—Ä—É—é—â–µ–≥–æ –º–µ—Ç–æ–¥–∞ `get_commissions()` –≤ `client.py`
2. –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ —Ç–∏–ø–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã—Ö –¥–∞–Ω–Ω—ã—Ö
3. –û—à–∏–±–æ–∫ –≤ –ª–æ–≥–∏–∫–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∫–æ–º–∏—Å—Å–∏–π

## ‚úÖ **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**

### 1. **client.py:**
- –£–¥–∞–ª–µ–Ω –¥—É–±–ª–∏—Ä—É—é—â–∏–π –º–µ—Ç–æ–¥ `get_commissions()`
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã–π —Ç–∏–ø: `List[Dict[str, Any]]` –≤–º–µ—Å—Ç–æ `Dict[str, Any]`
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç–≤–µ—Ç–∞ API
- –û–±–Ω–æ–≤–ª–µ–Ω –º–µ—Ç–æ–¥ `get_all_data()` –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π —Ä–∞–±–æ—Ç—ã —Å –∫–æ–º–∏—Å—Å–∏—è–º–∏

### 2. **sync_service.py:**
- –£–ø—Ä–æ—â–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è –∫–æ–º–∏—Å—Å–∏–π
- –£–ª—É—á—à–µ–Ω –º–µ—Ç–æ–¥ `_calculate_commission()` —Å –¥–µ—Ç–∞–ª—å–Ω—ã–º –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ–º
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –ø—É—Å—Ç—ã—Ö –¥–∞–Ω–Ω—ã—Ö –∫–æ–º–∏—Å—Å–∏–π
- –î–æ–±–∞–≤–ª–µ–Ω fallback –Ω–∞ –¥–µ—Ñ–æ–ª—Ç–Ω—É—é –∫–æ–º–∏—Å—Å–∏—é 20% –µ—Å–ª–∏ –¥–∞–Ω–Ω—ã–µ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã

## üß™ **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:**
–°–æ–∑–¥–∞–Ω —Ç–µ—Å—Ç `test_commissions_fix.py` –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π.

## üìä **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- –ö–æ–º–∏—Å—Å–∏–∏ –¥–æ–ª–∂–Ω—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞—Ç—å—Å—è –¥–ª—è –∑–∞–∫–∞–∑–æ–≤
- –õ–æ–≥–∏ –¥–æ–ª–∂–Ω—ã –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –ø—Ä–æ—Ü–µ—Å—Å –ø–æ–∏—Å–∫–∞ –∏ —Ä–∞—Å—á–µ—Ç–∞ –∫–æ–º–∏—Å—Å–∏–π
- –ü—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –¥–∞–Ω–Ω—ã—Ö –∫–æ–º–∏—Å—Å–∏–π –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –¥–µ—Ñ–æ–ª—Ç–Ω–∞—è —Å—Ç–∞–≤–∫–∞ 20%

## üöÄ **–ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–∞:**
```bash
cd server
python test_commissions_fix.py
```

*–ù–µ –∑–∞–±—É–¥—å—Ç–µ –∑–∞–º–µ–Ω–∏—Ç—å `YOUR_WB_API_KEY_HERE` –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–π API –∫–ª—é—á WB*