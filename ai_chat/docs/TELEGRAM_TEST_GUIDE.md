# ü§ñ Telegram Bot - –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é AI Chat

## ‚úÖ –°—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–∏—Å–æ–≤

–í—Å–µ —Å–µ—Ä–≤–∏—Å—ã –∑–∞–ø—É—â–µ–Ω—ã –∏ —Ä–∞–±–æ—Ç–∞—é—Ç:

```
‚úÖ PostgreSQL (db) - –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
‚úÖ Redis - –ö–µ—à –∏ –æ—á–µ—Ä–µ–¥–∏
‚úÖ FastAPI Server - –û—Å–Ω–æ–≤–Ω–æ–π API
‚úÖ Celery Worker - –§–æ–Ω–æ–≤—ã–µ –∑–∞–¥–∞—á–∏
‚úÖ Celery Beat - –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫
‚úÖ GPT Integration - –ê–Ω–∞–ª–∏–∑ –¥–∞–Ω–Ω—ã—Ö
‚úÖ AI Chat Service (9001) - –ù–æ–≤—ã–π AI —á–∞—Ç-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç
‚úÖ Telegram Bot - –ë–æ—Ç –≤ —Ä–µ–∂–∏–º–µ polling
```

## üì± –ö–∞–∫ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å AI Chat

### 1. –û—Ç–∫—Ä–æ–π—Ç–µ Telegram –±–æ—Ç–∞

–ù–∞–π–¥–∏—Ç–µ –≤–∞—à–µ–≥–æ –±–æ—Ç–∞: **@wb_assistbot**

### 2. –ù–∞–≤–∏–≥–∞—Ü–∏—è –∫ AI Chat

```
1. –û—Ç–∫—Ä–æ–π—Ç–µ –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é –±–æ—Ç–∞
2. –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É: ü§ñ AI-–ø–æ–º–æ—â–Ω–∏–∫
3. –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É: üí¨ AI-—á–∞—Ç
4. –ù–∞—á–Ω–∏—Ç–µ –¥–∏–∞–ª–æ–≥!
```

### 3. –î–æ—Å—Ç—É–ø–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

```
/ai_limits - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—Å—Ç–∞—Ç–æ–∫ –∑–∞–ø—Ä–æ—Å–æ–≤ (30/–¥–µ–Ω—å)
```

**–ö–Ω–æ–ø–∫–∏ –≤ —Ä–µ–∂–∏–º–µ —á–∞—Ç–∞:**
- üîô –í—ã–π—Ç–∏ –∏–∑ —á–∞—Ç–∞ - –≤–µ—Ä–Ω—É—Ç—å—Å—è –≤ –º–µ–Ω—é AI-–ø–æ–º–æ—â–Ω–∏–∫–∞
- üìä –ú–æ–∏ –ª–∏–º–∏—Ç—ã - –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—Å—Ç–∞—Ç–æ–∫ –∑–∞–ø—Ä–æ—Å–æ–≤

### 4. –°—Ü–µ–Ω–∞—Ä–∏–π —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

#### –¢–µ—Å—Ç 1: –ë–∞–∑–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å
```
1. –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é ‚Üí ü§ñ AI-–ø–æ–º–æ—â–Ω–∏–∫ ‚Üí üí¨ AI-—á–∞—Ç
2. –ë–æ—Ç –æ—Ç–≤–µ—Ç–∏—Ç –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ–º –∏ –ø—Ä–µ–¥–ª–æ–∂–∏—Ç –∑–∞–¥–∞—Ç—å –≤–æ–ø—Ä–æ—Å
3. –û—Ç–ø—Ä–∞–≤—å—Ç–µ –≤–æ–ø—Ä–æ—Å, –Ω–∞–ø—Ä–∏–º–µ—Ä:
   "–ö–∞–∫ —É–≤–µ–ª–∏—á–∏—Ç—å –ø—Ä–æ–¥–∞–∂–∏ –Ω–∞ Wildberries?"
4. –ü–æ–ª—É—á–∏—Ç–µ –æ—Ç–≤–µ—Ç –æ—Ç AI
5. –ü—Ä–æ–¥–æ–ª–∂–∞–π—Ç–µ –¥–∏–∞–ª–æ–≥ - AI –ø–æ–º–Ω–∏—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç –ø–æ—Å–ª–µ–¥–Ω–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
```

#### –¢–µ—Å—Ç 2: –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–∏–º–∏—Ç–æ–≤ —á–µ—Ä–µ–∑ –∫–Ω–æ–ø–∫—É
```
1. –í —Ä–µ–∂–∏–º–µ AI —á–∞—Ç–∞ –Ω–∞–∂–º–∏—Ç–µ: üìä –ú–æ–∏ –ª–∏–º–∏—Ç—ã
2. –£–≤–∏–¥–∏—Ç–µ —Ç–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å:
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ –∑–∞–ø—Ä–æ—Å–æ–≤ —Å–µ–≥–æ–¥–Ω—è: X/30
   - –û—Å—Ç–∞–ª–æ—Å—å –∑–∞–ø—Ä–æ—Å–æ–≤: Y
   - –î–∞—Ç–∞ —Å–±—Ä–æ—Å–∞: –∑–∞–≤—Ç—Ä–∞ –≤ 00:00
3. –ö–Ω–æ–ø–∫–∏ –≤–µ—Ä–Ω—É—Ç –≤–∞—Å –æ–±—Ä–∞—Ç–Ω–æ –≤ —Ä–µ–∂–∏–º —á–∞—Ç–∞
```

#### –¢–µ—Å—Ç 3: –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
```
1. –í —Ä–µ–∂–∏–º–µ AI —á–∞—Ç–∞ –∑–∞–¥–∞–π—Ç–µ –≤–æ–ø—Ä–æ—Å: "–ß—Ç–æ —Ç–∞–∫–æ–µ SEO –¥–ª—è –∫–∞—Ä—Ç–æ—á–∫–∏ —Ç–æ–≤–∞—Ä–∞?"
2. –ó–∞—Ç–µ–º –∑–∞–¥–∞–π—Ç–µ —Å–≤—è–∑–∞–Ω–Ω—ã–π –≤–æ–ø—Ä–æ—Å: "–ê –∫–∞–∫ —ç—Ç–æ –ø—Ä–∏–º–µ–Ω–∏—Ç—å –Ω–∞ –ø—Ä–∞–∫—Ç–∏–∫–µ?"
3. AI –¥–æ–ª–∂–µ–Ω –ø–æ–º–Ω–∏—Ç—å –∫–æ–Ω—Ç–µ–∫—Å—Ç –ø–µ—Ä–≤–æ–≥–æ –≤–æ–ø—Ä–æ—Å–∞
```

#### –¢–µ—Å—Ç 4: –í—ã—Ö–æ–¥ –∏–∑ —á–∞—Ç–∞ —á–µ—Ä–µ–∑ –∫–Ω–æ–ø–∫—É
```
1. –í —Ä–µ–∂–∏–º–µ —á–∞—Ç–∞ –Ω–∞–∂–º–∏—Ç–µ: üîô –í—ã–π—Ç–∏ –∏–∑ —á–∞—Ç–∞
2. –ë–æ—Ç –≤–µ—Ä–Ω–µ—Ç –≤–∞—Å –≤ –º–µ–Ω—é AI-–ø–æ–º–æ—â–Ω–∏–∫–∞
3. –ú–æ–∂–µ—Ç–µ –≤—ã–±—Ä–∞—Ç—å –¥—Ä—É–≥–∏–µ –¥–µ–π—Å—Ç–≤–∏—è
```

## üéØ –ü—Ä–∏–º–µ—Ä—ã –≤–æ–ø—Ä–æ—Å–æ–≤ –¥–ª—è AI

### –ê–Ω–∞–ª–∏—Ç–∏–∫–∞
```
- –ö–∞–∫–∏–µ –º–µ—Ç—Ä–∏–∫–∏ –≤–∞–∂–Ω—ã –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –ø—Ä–æ–¥–∞–∂?
- –ö–∞–∫ –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–æ–Ω–≤–µ—Ä—Å–∏—é –∫–æ—Ä–∑–∏–Ω—ã?
- –ß—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç CTR –∏ –∫–∞–∫ –µ–≥–æ —É–ª—É—á—à–∏—Ç—å?
```

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∫–∞—Ä—Ç–æ—á–µ–∫
```
- –ö–∞–∫ –Ω–∞–ø–∏—Å–∞—Ç—å –ø—Ä–æ–¥–∞—é—â–µ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞?
- –ö–∞–∫–∏–µ –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ?
- –°–∫–æ–ª—å–∫–æ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π –Ω—É–∂–Ω–æ –¥–ª—è –∫–∞—Ä—Ç–æ—á–∫–∏?
```

### –ü—Ä–æ–¥–≤–∏–∂–µ–Ω–∏–µ
```
- –ö–∞–∫–∏–µ –≤–∏–¥—ã —Ä–µ–∫–ª–∞–º—ã –µ—Å—Ç—å –Ω–∞ Wildberries?
- –ö–∞–∫ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é –∫–∞–º–ø–∞–Ω–∏—é?
- –ö–æ–≥–¥–∞ –ª—É—á—à–µ –∑–∞–ø—É—Å–∫–∞—Ç—å —Ä–µ–∫–ª–∞–º—É?
```

### –õ–æ–≥–∏—Å—Ç–∏–∫–∞
```
- –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç FBO –Ω–∞ Wildberries?
- –ß—Ç–æ —Ç–∞–∫–æ–µ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –ª–æ–≥–∏—Å—Ç–∏–∫–∏?
- –ö–∞–∫ –∏–∑–±–µ–∂–∞—Ç—å —à—Ç—Ä–∞—Ñ–æ–≤ –∑–∞ –≤–æ–∑–≤—Ä–∞—Ç—ã?
```

## üìä –ß—Ç–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è

- ‚úÖ **–õ–∏–º–∏—Ç –∑–∞–ø—Ä–æ—Å–æ–≤**: 30 –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ –¥–µ–Ω—å –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- ‚úÖ **–ö–æ–Ω—Ç–µ–∫—Å—Ç**: AI –ø–æ–º–Ω–∏—Ç –ø–æ—Å–ª–µ–¥–Ω–∏–µ 5 —Å–æ–æ–±—â–µ–Ω–∏–π
- ‚úÖ **–¢–µ–º–∞—Ç–∏–∫–∞**: –û—Ç–≤–µ—Ç—ã —Ç–æ–ª—å–∫–æ –ø–æ Wildberries –∏ e-commerce
- ‚úÖ **–ò—Å—Ç–æ—Ä–∏—è**: –í—Å–µ —Å–æ–æ–±—â–µ–Ω–∏—è —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –ë–î
- ‚úÖ **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: –¢–æ–ª—å–∫–æ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã

## üîç –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ä–∞–±–æ—Ç—ã

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤ AI Chat —Å–µ—Ä–≤–∏—Å–∞
```bash
docker logs wb_assist-ai_chat-1 -f
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤ –±–æ—Ç–∞
```bash
docker logs wb_assist-bot-1 -f
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ —Å–µ—Ä–≤–∏—Å–æ–≤
```bash
docker-compose ps
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ë–î (–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø—Ä–æ—Å–æ–≤)
```bash
docker exec -it wb_assist-db-1 psql -U wb_user -d wb_assist -c "SELECT COUNT(*) FROM ai_chat_requests;"
```

## üêõ Troubleshooting

### –ë–æ—Ç –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å
docker-compose ps

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞
docker-compose restart bot
```

### AI Chat –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏
docker logs wb_assist-ai_chat-1 --tail 50

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å
curl http://localhost:9001/health
```

### –ü—Ä–µ–≤—ã—à–µ–Ω –ª–∏–º–∏—Ç –∑–∞–ø—Ä–æ—Å–æ–≤
–õ–∏–º–∏—Ç—ã —Å–±—Ä–∞—Å—ã–≤–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤ –ø–æ–ª–Ω–æ—á—å. –î–ª—è —Å–±—Ä–æ—Å–∞ –≤—Ä—É—á–Ω—É—é (—Ç–æ–ª—å–∫–æ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è):
```bash
# –ß–µ—Ä–µ–∑ API (—Ç—Ä–µ–±—É–µ—Ç—Å—è API_SECRET_KEY)
curl -X POST http://localhost:9001/v1/chat/reset-limit \
  -H "X-Api-Key: YOUR_API_KEY" \
  -H "Content-Type: application/json" \
  -d '{"telegram_id": 123456789}'
```

## üìà –û–∂–∏–¥–∞–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ

### ‚úÖ –£—Å–ø–µ—à–Ω—ã–π –∑–∞–ø—Ä–æ—Å
```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: –ö–∞–∫ —É–≤–µ–ª–∏—á–∏—Ç—å –∫–æ–Ω–≤–µ—Ä—Å–∏—é?
AI: [–î–µ—Ç–∞–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç –ø—Ä–æ –∫–æ–Ω–≤–µ—Ä—Å–∏—é –Ω–∞ WB]
–û—Å—Ç–∞–ª–æ—Å—å –∑–∞–ø—Ä–æ—Å–æ–≤: 29/30
```

### ‚ö†Ô∏è –ü—Ä–µ–≤—ã—à–µ–Ω –ª–∏–º–∏—Ç
```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: –ù–æ–≤—ã–π –≤–æ–ø—Ä–æ—Å
–ë–æ—Ç: ‚ö†Ô∏è –ü—Ä–µ–≤—ã—à–µ–Ω –ª–∏–º–∏—Ç –∑–∞–ø—Ä–æ—Å–æ–≤ (30/–¥–µ–Ω—å)
     –°–ª–µ–¥—É—é—â–∏–π —Å–±—Ä–æ—Å: –∑–∞–≤—Ç—Ä–∞ –≤ 00:00
```

### üö´ –ù–µ –ø–æ —Ç–µ–º–µ
```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: –ö–∞–∫ –ø—Ä–∏–≥–æ—Ç–æ–≤–∏—Ç—å –±–æ—Ä—â?
AI: –ò–∑–≤–∏–Ω–∏—Ç–µ, —è —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä—É—é—Å—å —Ç–æ–ª—å–∫–æ –Ω–∞ –≤–æ–ø—Ä–æ—Å–∞—Ö 
    –æ Wildberries –∏ —ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω–æ–π –∫–æ–º–º–µ—Ä—Ü–∏–∏.
```

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
2. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –≤—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã (.env)
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ OPENAI_API_KEY –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –±–æ—Ç –∑–∞–ø—É—â–µ–Ω –≤ —Ä–µ–∂–∏–º–µ polling

---

**–ì–æ—Ç–æ–≤–æ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é!** üöÄ

–ù–∞—á–Ω–∏—Ç–µ —Å –∫–æ–º–∞–Ω–¥—ã `/ai_chat` –≤ –±–æ—Ç–µ @wb_assistbot

