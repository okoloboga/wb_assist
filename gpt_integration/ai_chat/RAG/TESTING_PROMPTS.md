# –ü—Ä–∏–º–µ—Ä—ã –ø—Ä–æ–º–ø—Ç–æ–≤ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è RAG –≤–µ–∫—Ç–æ—Ä–Ω–æ–π –ë–î

## üéØ –ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –≤–µ–∫—Ç–æ—Ä–Ω–∞—è –ë–î —Ä–∞–±–æ—Ç–∞–µ—Ç

–ü–æ—Å–ª–µ –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö (–∫–æ–≥–¥–∞ –≤ –ë–î –µ—Å—Ç—å –ø—Ä–æ–∏–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —á–∞–Ω–∫–∏), –º–æ–∂–Ω–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ–∏—Å–∫ —Å –ø–æ–º–æ—â—å—é —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –ø—Ä–æ–º–ø—Ç–æ–≤.

## üìù –ü—Ä–∏–º–µ—Ä—ã –ø—Ä–æ–º–ø—Ç–æ–≤ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### 1. –í–æ–ø—Ä–æ—Å—ã –æ –ø—Ä–æ–¥–∞–∂–∞—Ö

```
–ö–∞–∫–∏–µ —Ç–æ–≤–∞—Ä—ã –ø—Ä–æ–¥–∞–ª–∏—Å—å –ª—É—á—à–µ –≤—Å–µ–≥–æ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–π –º–µ—Å—è—Ü?
```

```
–°–∫–æ–ª—å–∫–æ –ø—Ä–æ–¥–∞–∂ –±—ã–ª–æ –≤—á–µ—Ä–∞?
```

```
–ö–∞–∫–æ–π —Ç–æ–≤–∞—Ä –ø—Ä–∏–Ω–µ—Å –±–æ–ª—å—à–µ –≤—Å–µ–≥–æ –≤—ã—Ä—É—á–∫–∏?
```

```
–ü–æ–∫–∞–∂–∏ —Ç–æ–ø-5 —Å–∞–º—ã—Ö –ø—Ä–æ–¥–∞–≤–∞–µ–º—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤
```

### 2. –í–æ–ø—Ä–æ—Å—ã –æ –∑–∞–∫–∞–∑–∞—Ö

```
–°–∫–æ–ª—å–∫–æ –∑–∞–∫–∞–∑–æ–≤ –±—ã–ª–æ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω—é—é –Ω–µ–¥–µ–ª—é?
```

```
–ö–∞–∫–∏–µ —Ç–æ–≤–∞—Ä—ã —á–∞—â–µ –≤—Å–µ–≥–æ –∑–∞–∫–∞–∑—ã–≤–∞—é—Ç?
```

```
–ü–æ–∫–∞–∂–∏ –ø–æ—Å–ª–µ–¥–Ω–∏–µ –∑–∞–∫–∞–∑—ã
```

### 3. –í–æ–ø—Ä–æ—Å—ã –æ–± –æ—Å—Ç–∞—Ç–∫–∞—Ö

```
–ö–∞–∫–∏–µ —Ç–æ–≤–∞—Ä—ã –∑–∞–∫–∞–Ω—á–∏–≤–∞—é—Ç—Å—è –Ω–∞ —Å–∫–ª–∞–¥–µ?
```

```
–°–∫–æ–ª—å–∫–æ —Ç–æ–≤–∞—Ä–æ–≤ –Ω–∞ —Å–∫–ª–∞–¥–µ?
```

```
–ü–æ–∫–∞–∂–∏ —Ç–æ–≤–∞—Ä—ã —Å –Ω–∏–∑–∫–∏–º–∏ –æ—Å—Ç–∞—Ç–∫–∞–º–∏
```

### 4. –í–æ–ø—Ä–æ—Å—ã –æ–± –æ—Ç–∑—ã–≤–∞—Ö

```
–ö–∞–∫–∏–µ –æ—Ç–∑—ã–≤—ã –ø–æ–ª—É—á–∏–ª–∏ –º–æ–∏ —Ç–æ–≤–∞—Ä—ã?
```

```
–ï—Å—Ç—å –ª–∏ –Ω–µ–≥–∞—Ç–∏–≤–Ω—ã–µ –æ—Ç–∑—ã–≤—ã?
```

```
–ö–∞–∫–æ–π —Å—Ä–µ–¥–Ω–∏–π —Ä–µ–π—Ç–∏–Ω–≥ —É –º–æ–∏—Ö —Ç–æ–≤–∞—Ä–æ–≤?
```

### 5. –ö–æ–º–ø–ª–µ–∫—Å–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã

```
–†–∞—Å—Å–∫–∞–∂–∏ –ø—Ä–æ –º–æ–∏ –ø—Ä–æ–¥–∞–∂–∏ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–π –º–µ—Å—è—Ü
```

```
–ö–∞–∫–∞—è –¥–∏–Ω–∞–º–∏–∫–∞ –ø—Ä–æ–¥–∞–∂?
```

```
–ß—Ç–æ –Ω—É–∂–Ω–æ —É–ª—É—á—à–∏—Ç—å –≤ –º–æ–µ–º –º–∞–≥–∞–∑–∏–Ω–µ?
```

## üîç –ß—Ç–æ –ø—Ä–æ–≤–µ—Ä—è—Ç—å –≤ –ª–æ–≥–∞—Ö

–ü–æ—Å–ª–µ –æ—Ç–ø—Ä–∞–≤–∫–∏ –ø—Ä–æ–º–ø—Ç–∞ –≤ AI Chat, –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ `gpt`:

```bash
docker-compose logs -f gpt | grep -i "rag\|–ø–æ–∏—Å–∫\|similarity\|–Ω–∞–π–¥–µ–Ω–æ"
```

### –£—Å–ø–µ—à–Ω—ã–π –ø–æ–∏—Å–∫ –¥–æ–ª–∂–µ–Ω –ø–æ–∫–∞–∑–∞—Ç—å:

1. **–ù–∞—á–∞–ª–æ –ø–æ–∏—Å–∫–∞:**
   ```
   üîç –ù–∞—á–∞–ª–æ –ø–æ–∏—Å–∫–∞ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã—Ö —á–∞–Ω–∫–æ–≤:
     üìù –ó–∞–ø—Ä–æ—Å: '–∫–∞–∫–∏–µ —Ç–æ–≤–∞—Ä—ã –ø—Ä–æ–¥–∞–ª–∏—Å—å –ª—É—á—à–µ –≤—Å–µ–≥–æ'
     üè¢ Cabinet ID: 2
     üìä –ü–æ—Ä–æ–≥ similarity: 0.5
   ```

2. **–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∏—Å–∫–∞:**
   ```
   üìà –ü–æ–ª—É—á–µ–Ω–æ 5 —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –∏–∑ –ë–î (–¥–æ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –ø–æ –ø–æ—Ä–æ–≥—É)
   ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏: –ø—Ä–æ—à–ª–æ=3, –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞–Ω–æ=2, –ø–æ—Ä–æ–≥=0.5
   üìä –î–∏–∞–ø–∞–∑–æ–Ω similarity –ø—Ä–æ—à–µ–¥—à–∏—Ö —Ñ–∏–ª—å—Ç—Ä: min=0.5123, max=0.6234, avg=0.5678
   ```

3. **–§–∏–Ω–∞–ª—å–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã:**
   ```
   ‚úÖ –§–∏–Ω–∞–ª—å–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∏—Å–∫–∞:
     üìä –í—Å–µ–≥–æ –Ω–∞–π–¥–µ–Ω–æ: 3 —á–∞–Ω–∫–æ–≤
     üìà –î–∏–∞–ø–∞–∑–æ–Ω similarity: 0.6234 - 0.5123
     üìù –¢–∏–ø—ã —á–∞–Ω–∫–æ–≤: sale, product
   ```

## ‚ö†Ô∏è –ï—Å–ª–∏ –ø–æ–∏—Å–∫ –Ω–µ –Ω–∞—Ö–æ–¥–∏—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –∏–Ω–¥–µ–∫—Å–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞:**
   ```bash
   docker-compose exec gpt python -m gpt_integration.ai_chat.RAG.test_indexing 2
   ```

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ–∏–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —á–∞–Ω–∫–æ–≤:**
   ```sql
   SELECT COUNT(*) FROM rag_metadata WHERE cabinet_id = 2;
   SELECT COUNT(*) FROM rag_embeddings;
   ```

3. **–ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–∏–∑–∏—Ç—å –ø–æ—Ä–æ–≥ similarity:**
   - –í `.env` –∏–ª–∏ `docker-compose.yml` —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ `RAG_SIMILARITY_THRESHOLD=0.3`
   - –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä `gpt`

## üéØ –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –ø—Ä–æ–º–ø—Ç—ã –¥–ª—è –ø–µ—Ä–≤–æ–≥–æ —Ç–µ—Å—Ç–∞

–ù–∞—á–Ω–∏—Ç–µ —Å –ø—Ä–æ—Å—Ç—ã—Ö –≤–æ–ø—Ä–æ—Å–æ–≤:

1. **"–ö–∞–∫–∏–µ —Ç–æ–≤–∞—Ä—ã –ø—Ä–æ–¥–∞–ª–∏—Å—å –ª—É—á—à–µ –≤—Å–µ–≥–æ?"**
   - –î–æ–ª–∂–µ–Ω –Ω–∞–π—Ç–∏ —á–∞–Ω–∫–∏ —Ç–∏–ø–∞ `sale` —Å –≤—ã—Å–æ–∫–∏–º similarity

2. **"–°–∫–æ–ª—å–∫–æ –∑–∞–∫–∞–∑–æ–≤ –±—ã–ª–æ?"**
   - –î–æ–ª–∂–µ–Ω –Ω–∞–π—Ç–∏ —á–∞–Ω–∫–∏ —Ç–∏–ø–∞ `order`

3. **"–ö–∞–∫–∏–µ —Ç–æ–≤–∞—Ä—ã –Ω–∞ —Å–∫–ª–∞–¥–µ?"**
   - –î–æ–ª–∂–µ–Ω –Ω–∞–π—Ç–∏ —á–∞–Ω–∫–∏ —Ç–∏–ø–∞ `stock`

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –ø–æ–∏—Å–∫–∞ –º–æ–∂–Ω–æ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç—å –∫ –±–æ–ª–µ–µ —Å–ª–æ–∂–Ω—ã–º –≤–æ–ø—Ä–æ—Å–∞–º.

