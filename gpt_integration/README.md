# GPT Integration Service

–û—Ç–¥–µ–ª—å–Ω—ã–π FastAPI-—Å–µ—Ä–≤–∏—Å –¥–ª—è LLM —Ñ—É–Ω–∫—Ü–∏–π (—á–∞—Ç –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∞), –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Å —Å–µ—Ä–≤–µ—Ä–æ–º Bot API –∏ Telegram –±–æ—Ç–æ–º.

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### –û–±—â–∏–µ
- `/health` ‚Äî –ø—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è —Å–µ—Ä–≤–∏—Å–∞

### AI Chat (–ß–∞—Ç-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç)
- `/v1/chat/send` ‚Äî –æ—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è –≤ AI —á–∞—Ç
- `/v1/chat/history` ‚Äî –ø–æ–ª—É—á–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ —á–∞—Ç–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `/v1/chat/limits/{telegram_id}` ‚Äî –ø—Ä–æ–≤–µ—Ä–∫–∞ –ª–∏–º–∏—Ç–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `/v1/chat/reset-limit` ‚Äî —Å–±—Ä–æ—Å –ª–∏–º–∏—Ç–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (admin)
- `/v1/chat/stats/{telegram_id}` ‚Äî —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- **–õ–∏–º–∏—Ç—ã:** 30 –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ —Å—É—Ç–∫–∏ –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- **–•—Ä–∞–Ω–µ–Ω–∏–µ:** –∏—Å—Ç–æ—Ä–∏—è —á–∞—Ç–∞ –≤ PostgreSQL

### –ê–Ω–∞–ª–∏—Ç–∏–∫–∞
- `/v1/chat` ‚Äî —Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π —á–∞—Ç —Å LLM (OpenAI‚Äë—Å–æ–≤–º–µ—Å—Ç–∏–º—ã–π API)
- `/v1/analysis` ‚Äî –∑–∞–ø—É—Å–∫ –∞–Ω–∞–ª–∏–∑–∞ –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –ø–æ —à–∞–±–ª–æ–Ω—É
- `/v1/analysis/start` ‚Äî –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –∑–∞–ø—É—Å–∫ –∞–Ω–∞–ª–∏–∑–∞ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è WB, –¥–æ—Å—Ç–∞–≤–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –≤ –±–æ—Ç–∞

### –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–∞—Ä—Ç–æ—á–µ–∫ —Ç–æ–≤–∞—Ä–æ–≤
- `/v1/card-generation` ‚Äî –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –æ–ø–∏—Å–∞–Ω–∏–π –∏ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫ —Ç–æ–≤–∞—Ä–æ–≤

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- `/v1/photo-processing` ‚Äî –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∏ –∞–Ω–∞–ª–∏–∑ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π —Ç–æ–≤–∞—Ä–æ–≤

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–∏—Å—Ç–µ–º—ã
```mermaid
graph TB
    Bot[Telegram Bot :8001] --> GPT[GPT Integration :9000]
    Server[Bot API Server :8000] --> GPT
    GPT --> OpenAI[OpenAI API]
    
    subgraph "GPT Integration Service"
        GPT --> AiChat[AI Chat Module]
        GPT --> Analysis[Analysis Module]
        GPT --> CardGen[Card Generation]
        GPT --> PhotoProc[Photo Processing]
    end
    
    AiChat --> DB[(PostgreSQL)]
    Server --> DB
    
    style GPT fill:#e1f5ff
    style AiChat fill:#fff4e6
    style Analysis fill:#fff4e6
    style CardGen fill:#fff4e6
    style PhotoProc fill:#fff4e6
```

### –ú–æ–¥—É–ª–∏ GPT Integration
- **`ai_chat/`** ‚Äî —á–∞—Ç-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç —Å –ª–∏–º–∏—Ç–∞–º–∏ –∏ –∏—Å—Ç–æ—Ä–∏–µ–π
- **`analysis/`** ‚Äî –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ –ø—Ä–æ–¥–∞–∂ –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
- **`card_generation/`** ‚Äî –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –æ–ø–∏—Å–∞–Ω–∏–π —Ç–æ–≤–∞—Ä–æ–≤
- **`photo_processing/`** ‚Äî –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- **`simple_chat/`** ‚Äî –ø—Ä–æ—Å—Ç–æ–π —á–∞—Ç –±–µ–∑ –∏—Å—Ç–æ—Ä–∏–∏

### –ü–æ—Ç–æ–∫ —Ä–∞–±–æ—Ç—ã AI Chat
```mermaid
sequenceDiagram
    participant User as –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
    participant Bot as Telegram Bot
    participant GPT as GPT Integration
    participant DB as PostgreSQL
    participant OpenAI as OpenAI API
    
    User->>Bot: –°–æ–æ–±—â–µ–Ω–∏–µ –≤ —á–∞—Ç
    Bot->>GPT: POST /v1/chat/send
    GPT->>DB: –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–∏–º–∏—Ç–æ–≤
    alt –õ–∏–º–∏—Ç –∏—Å—á–µ—Ä–ø–∞–Ω
        GPT-->>Bot: 429 Too Many Requests
        Bot-->>User: –õ–∏–º–∏—Ç –∏—Å—á–µ—Ä–ø–∞–Ω
    else –õ–∏–º–∏—Ç OK
        GPT->>OpenAI: –ó–∞–ø—Ä–æ—Å –∫ LLM
        OpenAI-->>GPT: –û—Ç–≤–µ—Ç
        GPT->>DB: –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –∏—Å—Ç–æ—Ä–∏—é
        GPT-->>Bot: –û—Ç–≤–µ—Ç + remaining_requests
        Bot-->>User: –û—Ç–≤–µ—Ç –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞
    end
```

### –ü–æ—Ç–æ–∫ —Ä–∞–±–æ—Ç—ã Analysis
1) –ë–æ—Ç –≤—ã–∑—ã–≤–∞–µ—Ç `POST /v1/analysis/start` —Å `telegram_id` (+ `period`)
2) gpt‚Äë—Å–µ—Ä–≤–∏—Å —Å–æ–±–∏—Ä–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ `server` (`/api/v1/bot/analytics/sales`)
3) –§–æ—Ä–º–∏—Ä—É–µ—Ç –ø—Ä–æ–º–ø—Ç –ø–æ `LLM_ANALYSIS_TEMPLATE.md` –∏ –≤—ã–∑—ã–≤–∞–µ—Ç LLM
4) –í–∞–ª–∏–¥–∏—Ä—É–µ—Ç JSON‚Äë—Ä–µ–∑—É–ª—å—Ç–∞—Ç –∏ –≥–æ—Ç–æ–≤–∏—Ç —Ç–µ–∫—Å—Ç –¥–ª—è Telegram
5) –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤–µ–±—Ö—É–∫–æ–º –Ω–∞ `bot /webhook/notifications/{telegram_id}`

## –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

### –û–±—â–∏–µ
- `GPT_PORT` ‚Äî –ø–æ—Ä—Ç —Å–µ—Ä–≤–∏—Å–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `9000`)
- `API_SECRET_KEY` ‚Äî —Å–µ–∫—Ä–µ—Ç –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ (—Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å —Å–µ—Ä–≤–µ—Ä–æ–º)

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å–µ—Ä–≤–µ—Ä–æ–º
- `SERVER_HOST` ‚Äî –±–∞–∑–æ–≤—ã–π URL —Å–µ—Ä–≤–µ—Ä–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä `http://server:8000`)
- –ó–∞–≥–æ–ª–æ–≤–æ–∫ –¥–ª—è –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ —Å–µ—Ä–≤–µ—Ä—É: `X-API-SECRET-KEY: {API_SECRET_KEY}`

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –±–æ—Ç–æ–º
- `BOT_WEBHOOK_BASE` ‚Äî –±–∞–∑–æ–≤—ã–π URL –±–æ—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä `http://bot:8001`)

### AI Chat
- `DATABASE_URL` ‚Äî URL –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ PostgreSQL (–Ω–∞–ø—Ä–∏–º–µ—Ä `postgresql://user:pass@db:5432/dbname`)
- `DAILY_LIMIT` ‚Äî –ª–∏–º–∏—Ç –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ —Å—É—Ç–∫–∏ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `30`)

### LLM (OpenAI‚Äë—Å–æ–≤–º–µ—Å—Ç–∏–º—ã–π)
- `OPENAI_API_KEY` ‚Äî –∫–ª—é—á –¥–æ—Å—Ç—É–ø–∞ (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
- `OPENAI_BASE_URL` ‚Äî –∫–∞—Å—Ç–æ–º–Ω—ã–π —ç–Ω–¥–ø–æ–∏–Ω—Ç (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- `OPENAI_MODEL` ‚Äî –º–æ–¥–µ–ª—å (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `gpt-4o-mini`)
- `OPENAI_TEMPERATURE` ‚Äî –∫—Ä–µ–∞—Ç–∏–≤–Ω–æ—Å—Ç—å (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `0.2` –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞, `0.7` –¥–ª—è —á–∞—Ç–∞)
- `OPENAI_MAX_TOKENS` ‚Äî –ª–∏–º–∏—Ç —Ç–æ–∫–µ–Ω–æ–≤ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `800` –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞, `1000` –¥–ª—è —á–∞—Ç–∞)
- `OPENAI_TIMEOUT` ‚Äî —Ç–∞–π–º–∞—É—Ç –∑–∞–ø—Ä–æ—Å–æ–≤ (—Å–µ–∫)
- `OPENAI_SYSTEM_PROMPT` ‚Äî —Å–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç; –µ—Å–ª–∏ –ø—É—Å—Ç–æ, –±–µ—Ä—ë—Ç—Å—è –∏–∑ `LLM_ANALYSIS_TEMPLATE.md` (`## SYSTEM`)

### –†–µ—Ç—Ä–∞–∏ –∏ —É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å
- `OPENAI_MAX_RETRIES` ‚Äî –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ø—ã—Ç–æ–∫ –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö/–ø—É—Å—Ç–æ–º –æ—Ç–≤–µ—Ç–µ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `2`)
- `OPENAI_RETRY_DELAY_MS` ‚Äî –Ω–∞—á–∞–ª—å–Ω–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ –º–µ–∂–¥—É –ø–æ–ø—ã—Ç–∫–∞–º–∏ –≤ –º—Å (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `500`)
- `OPENAI_RETRY_BACKOFF` ‚Äî –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç —ç–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–≥–æ –±—ç–∫‚Äë–æ—Ñ—Ñ–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `2`)
- `OPENAI_MAX_RETRIES_CONNECTION` ‚Äî –ø–æ–ø—ã—Ç–∫–∏ –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `8`)
- `OPENAI_RETRY_DELAY_CONNECTION_MS` ‚Äî –∑–∞–¥–µ—Ä–∂–∫–∞ –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `2000`)

### Photo Processing
- `IMAGE_GEN_API_KEY` ‚Äî –∫–ª—é—á API –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- `IMAGE_GEN_BASE_URL` ‚Äî –±–∞–∑–æ–≤—ã–π URL API –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
- `IMAGE_GEN_TIMEOUT` ‚Äî —Ç–∞–π–º–∞—É—Ç –∑–∞–ø—Ä–æ—Å–æ–≤ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `60`)
- `IMAGE_GEN_MAX_RETRIES` ‚Äî –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ø—ã—Ç–æ–∫ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `3`)
- `PHOTO_STORAGE_TYPE` ‚Äî —Ç–∏–ø —Ö—Ä–∞–Ω–µ–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `url`)
- `PHOTO_PROCESSING_DATABASE_URL` ‚Äî URL –ë–î –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

## –ó–∞–ø—É—Å–∫
### Docker Compose (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
- –í –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞: `docker-compose up -d --build`
- –°–µ—Ä–≤–∏—Å –¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞ `http://localhost:9000`

### –õ–æ–∫–∞–ª—å–Ω–æ (Python)
```bash
cd gpt_integration
pip install -r requirements.txt
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ (—Å–º. env_example.txt)
python -m gpt_integration.service
```
–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ: –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ –∏–º–ø–æ—Ä—Ç `utils.formatters` –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –¥–æ—Å—Ç—É–ø–µ–Ω –≤ `PYTHONPATH`. –ü—Ä–æ—â–µ –≤—Å–µ–≥–æ –∑–∞–ø—É—Å–∫–∞—Ç—å –∏–∑ –∫–æ—Ä–Ω—è –ø—Ä–æ–µ–∫—Ç–∞ –∏–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é `PYTHONPATH` –Ω–∞ –∫–æ—Ä–µ–Ω—å.

## –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã

### GET /health
–ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è —Å–µ—Ä–≤–∏—Å–∞.

**–û—Ç–≤–µ—Ç:**
```json
{ "status": "ok" }
```

---

### AI Chat

#### POST /v1/chat/send
–û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è –≤ AI —á–∞—Ç.

**–ó–∞–≥–æ–ª–æ–≤–∫–∏:**
- `X-API-KEY: {API_SECRET_KEY}`

**–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:**
```json
{
  "telegram_id": 123456789,
  "message": "–ö–∞–∫ —É–≤–µ–ª–∏—á–∏—Ç—å –∫–æ–Ω–≤–µ—Ä—Å–∏—é –∫–∞—Ä—Ç–æ—á–∫–∏ —Ç–æ–≤–∞—Ä–∞?"
}
```

**–û—Ç–≤–µ—Ç (—É—Å–ø–µ—Ö):**
```json
{
  "response": "–î–ª—è —É–≤–µ–ª–∏—á–µ–Ω–∏—è –∫–æ–Ω–≤–µ—Ä—Å–∏–∏ –∫–∞—Ä—Ç–æ—á–∫–∏ —Ç–æ–≤–∞—Ä–∞...",
  "remaining_requests": 25,
  "tokens_used": 234
}
```

**–û—Ç–≤–µ—Ç (–ª–∏–º–∏—Ç –∏—Å—á–µ—Ä–ø–∞–Ω):**
```json
{
  "error": "Daily limit exceeded",
  "message": "–í—ã –∏—Å—á–µ—Ä–ø–∞–ª–∏ –¥–Ω–µ–≤–Ω–æ–π –ª–∏–º–∏—Ç –∑–∞–ø—Ä–æ—Å–æ–≤ (30 –≤ —Å—É—Ç–∫–∏). –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∑–∞–≤—Ç—Ä–∞.",
  "requests_remaining": 0,
  "daily_limit": 30
}
```
HTTP Status: `429 Too Many Requests`

#### POST /v1/chat/history
–ü–æ–ª—É—á–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ —á–∞—Ç–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

**–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:**
```json
{
  "telegram_id": 123456789,
  "limit": 10,
  "offset": 0
}
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "items": [
    {
      "id": 1,
      "message": "–ö–∞–∫ —É–≤–µ–ª–∏—á–∏—Ç—å –ø—Ä–æ–¥–∞–∂–∏?",
      "response": "–î–ª—è —É–≤–µ–ª–∏—á–µ–Ω–∏—è –ø—Ä–æ–¥–∞–∂...",
      "tokens_used": 150,
      "created_at": "2025-10-29T10:15:23Z"
    }
  ],
  "total": 45,
  "limit": 10,
  "offset": 0
}
```

#### GET /v1/chat/limits/{telegram_id}
–ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–∏–º–∏—Ç–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

**–û—Ç–≤–µ—Ç:**
```json
{
  "telegram_id": 123456789,
  "requests_today": 5,
  "requests_remaining": 25,
  "daily_limit": 30,
  "reset_date": "2025-10-29"
}
```

#### POST /v1/chat/reset-limit (Admin)
–°–±—Ä–æ—Å –ª–∏–º–∏—Ç–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

**–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:**
```json
{
  "telegram_id": 123456789
}
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "success": true,
  "message": "Limit reset successfully for telegram_id=123456789"
}
```

#### GET /v1/chat/stats/{telegram_id}
–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ N –¥–Ω–µ–π.

**Query –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `days` (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 7)

**–û—Ç–≤–µ—Ç:**
```json
{
  "telegram_id": 123456789,
  "total_requests": 42,
  "total_tokens": 8500,
  "days": 7,
  "avg_requests_per_day": 6.0,
  "avg_tokens_per_request": 202.38
}
```

---

### –ê–Ω–∞–ª–∏—Ç–∏–∫–∞

#### POST /v1/chat
–°–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π —á–∞—Ç —Å LLM (OpenAI‚Äë—Å–æ–≤–º–µ—Å—Ç–∏–º—ã–π API).

**–¢–µ–ª–æ:**
```json
{
  "messages": [{"role": "user", "content": "–ü—Ä–∏–≤–µ—Ç"}],
  "system_prompt": "(–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º–Ω–æ–≥–æ –ø—Ä–æ–º–ø—Ç–∞)"
}
```

**–û—Ç–≤–µ—Ç:**
```json
{ "text": "..." }
```

#### POST /v1/analysis
–ó–∞–ø—É—Å–∫ –∞–Ω–∞–ª–∏–∑–∞ –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –ø–æ —à–∞–±–ª–æ–Ω—É.

**–¢–µ–ª–æ:**
```json
{
  "data": {"sales": {"orders": 10}},
  "template_path": "gpt_integration/LLM_ANALYSIS_TEMPLATE.md",
  "validate_output": true
}
```

**–û—Ç–≤–µ—Ç:** –æ–±—ä–µ–∫—Ç —Å –∫–ª—é—á–∞–º–∏ `messages`, `raw_response`, `json`, `telegram`, `sheets`, –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ `validation_errors`.

#### POST /v1/analysis/start
–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –∑–∞–ø—É—Å–∫ –∞–Ω–∞–ª–∏–∑–∞ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è WB, –¥–æ—Å—Ç–∞–≤–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –≤ –±–æ—Ç–∞.

**–ó–∞–≥–æ–ª–æ–≤–æ–∫:** `X-API-KEY: {API_SECRET_KEY}`

**–¢–µ–ª–æ:**
```json
{
  "telegram_id": 123456789,
  "period": "7d",
  "validate_output": true
}
```

**–û—Ç–≤–µ—Ç:**
```json
{ "status": "accepted", "message": "analysis started" }
```

## –ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤

### PowerShell

#### AI Chat - –æ—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è
```powershell
$headers = @{ "X-API-KEY" = "$env:API_SECRET_KEY" }
$body = @{
    telegram_id = 123456789
    message = "–ö–∞–∫ —É–≤–µ–ª–∏—á–∏—Ç—å –ø—Ä–æ–¥–∞–∂–∏?"
} | ConvertTo-Json

Invoke-RestMethod `
    -Method Post `
    -Uri "http://localhost:9000/v1/chat/send" `
    -Headers $headers `
    -ContentType "application/json" `
    -Body $body
```

#### AI Chat - –ø—Ä–æ–≤–µ—Ä–∫–∞ –ª–∏–º–∏—Ç–æ–≤
```powershell
$headers = @{ "X-API-KEY" = "$env:API_SECRET_KEY" }
Invoke-RestMethod `
    -Method Get `
    -Uri "http://localhost:9000/v1/chat/limits/123456789" `
    -Headers $headers
```

#### AI Chat - –ø–æ–ª—É—á–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏
```powershell
$headers = @{ "X-API-KEY" = "$env:API_SECRET_KEY" }
$body = @{
    telegram_id = 123456789
    limit = 10
    offset = 0
} | ConvertTo-Json

Invoke-RestMethod `
    -Method Post `
    -Uri "http://localhost:9000/v1/chat/history" `
    -Headers $headers `
    -ContentType "application/json" `
    -Body $body
```

#### –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ - –∑–∞–ø—É—Å–∫ –∞–Ω–∞–ª–∏–∑–∞
```powershell
$headers = @{ "X-API-KEY" = "$env:API_SECRET_KEY" }
$body = @{ telegram_id = 123456789; period = "7d"; validate_output = $true } | ConvertTo-Json
Invoke-RestMethod -Method Post -Uri "http://localhost:9000/v1/analysis/start" -Headers $headers -ContentType "application/json" -Body $body
```

#### –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è
```powershell
Invoke-RestMethod -Method Get -Uri "http://localhost:9000/health"
```

### curl

#### AI Chat - –æ—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è
```bash
curl -X POST "http://localhost:9000/v1/chat/send" \
  -H "X-API-KEY: your-secret-key" \
  -H "Content-Type: application/json" \
  -d '{
    "telegram_id": 123456789,
    "message": "–ö–∞–∫ —É–≤–µ–ª–∏—á–∏—Ç—å –ø—Ä–æ–¥–∞–∂–∏?"
  }'
```

#### AI Chat - –ø—Ä–æ–≤–µ—Ä–∫–∞ –ª–∏–º–∏—Ç–æ–≤
```bash
curl -X GET "http://localhost:9000/v1/chat/limits/123456789" \
  -H "X-API-KEY: your-secret-key"
```

#### AI Chat - –ø–æ–ª—É—á–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏
```bash
curl -X POST "http://localhost:9000/v1/chat/history" \
  -H "X-API-KEY: your-secret-key" \
  -H "Content-Type: application/json" \
  -d '{
    "telegram_id": 123456789,
    "limit": 10,
    "offset": 0
  }'
```

## –®–∞–±–ª–æ–Ω –∞–Ω–∞–ª–∏–∑–∞
–§–∞–π–ª `LLM_ANALYSIS_TEMPLATE.md` —Å–æ–¥–µ—Ä–∂–∏—Ç:
- `## SYSTEM` ‚Äî —Ä–æ–ª—å –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞
- `## TASKS` ‚Äî –∑–∞–¥–∞–Ω–∏—è –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞
- `## OUTPUT_JSON_SCHEMA` ‚Äî –∫–æ–Ω—Ç—Ä–∞–∫—Ç JSON
- `## OUTPUT_TG_GUIDE` ‚Äî –ø—Ä–∞–≤–∏–ª–∞ —Ñ–æ—Ä–º–∞—Ç–∞ —Å–æ–æ–±—â–µ–Ω–∏—è –¥–ª—è Telegram

## FAQ / Troubleshooting

### AI Chat

#### ‚ùå –û—à–∏–±–∫–∞: "OpenAI API key not configured"
**–ü—Ä–∏—á–∏–Ω–∞:** –ù–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è –æ–∫—Ä—É–∂–µ–Ω–∏—è `OPENAI_API_KEY`.

**–†–µ—à–µ–Ω–∏–µ:** 
```bash
# –í .env —Ñ–∞–π–ª–µ
OPENAI_API_KEY=sk-your-api-key-here

# –ò–ª–∏ –≤ docker-compose.yml
environment:
  - OPENAI_API_KEY=${OPENAI_API_KEY}
```

#### ‚ùå –û—à–∏–±–∫–∞: "Invalid or missing API key"
**–ü—Ä–∏—á–∏–Ω–∞:** –ó–∞–≥–æ–ª–æ–≤–æ–∫ `X-API-KEY` –Ω–µ —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å `API_SECRET_KEY` –∏–ª–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç.

**–†–µ—à–µ–Ω–∏–µ:** 
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ `X-API-KEY` –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ –∑–∞–ø—Ä–æ—Å–∞ —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å `API_SECRET_KEY` –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∑–∞–≥–æ–ª–æ–≤–æ–∫ –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –≤ –∫–∞–∂–¥–æ–º –∑–∞–ø—Ä–æ—Å–µ

#### ‚ùå –û—à–∏–±–∫–∞: 429 Too Many Requests
**–ü—Ä–∏—á–∏–Ω–∞:** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∏—Å—á–µ—Ä–ø–∞–ª –¥–Ω–µ–≤–Ω–æ–π –ª–∏–º–∏—Ç –∑–∞–ø—Ä–æ—Å–æ–≤ (30 –≤ —Å—É—Ç–∫–∏).

**–†–µ—à–µ–Ω–∏–µ:**
1. **–î–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:** –ø–æ–¥–æ–∂–¥–∏—Ç–µ –¥–æ —Å–ª–µ–¥—É—é—â–µ–≥–æ –¥–Ω—è (–ª–∏–º–∏—Ç—ã —Å–±—Ä–∞—Å—ã–≤–∞—é—Ç—Å—è –≤ 00:00 UTC)
2. **–î–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞:** –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç —Å–±—Ä–æ—Å–∞ –ª–∏–º–∏—Ç–∞:
```powershell
$headers = @{ "X-API-KEY" = "$env:API_SECRET_KEY" }
$body = @{ telegram_id = 123456789 } | ConvertTo-Json
Invoke-RestMethod -Method Post -Uri "http://localhost:9000/v1/chat/reset-limit" -Headers $headers -ContentType "application/json" -Body $body
```

#### üîß –ö–∞–∫ –∏–∑–º–µ–Ω–∏—Ç—å –¥–Ω–µ–≤–Ω–æ–π –ª–∏–º–∏—Ç –∑–∞–ø—Ä–æ—Å–æ–≤?
–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –ª–∏–º–∏—Ç **30 –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ —Å—É—Ç–∫–∏**.

**–†–µ—à–µ–Ω–∏–µ:** –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—É `DAILY_LIMIT` –≤ `gpt_integration/ai_chat/app/crud.py`:
```python
DAILY_LIMIT = 50  # –ò–∑–º–µ–Ω–∏—Ç–µ –Ω–∞ –Ω—É–∂–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
```

#### üóÑÔ∏è –ö–∞–∫ –æ—á–∏—Å—Ç–∏—Ç—å —Å—Ç–∞—Ä—É—é –∏—Å—Ç–æ—Ä–∏—é —á–∞—Ç–∞?
–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ –æ—á–∏—â–∞—Ç—å –∑–∞–ø–∏—Å–∏ —Å—Ç–∞—Ä—à–µ 6 –º–µ—Å—è—Ü–µ–≤.

**–†–µ—à–µ–Ω–∏–µ:** –í—ã–ø–æ–ª–Ω–∏—Ç–µ SQL-–∑–∞–ø—Ä–æ—Å:
```sql
DELETE FROM ai_chat_requests 
WHERE request_date < CURRENT_DATE - INTERVAL '6 months';
```

#### üìä –ö–∞–∫ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è?
–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç `/v1/chat/stats/{telegram_id}`:
```bash
curl -X GET "http://localhost:9000/v1/chat/stats/123456789?days=30" \
  -H "X-API-KEY: your-secret-key"
```

### –û–±—â–∏–µ –ø—Ä–æ–±–ª–µ–º—ã

#### ‚ùå –û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ OpenAI
**–ü—Ä–∏—á–∏–Ω–∞:** –ü—Ä–æ–±–ª–µ–º—ã —Å —Å–µ—Ç—å—é, –Ω–µ–≤–µ—Ä–Ω—ã–π `OPENAI_BASE_URL`, –∏–ª–∏ –ø—Ä–µ–≤—ã—à–µ–Ω rate limit OpenAI.

**–†–µ—à–µ–Ω–∏–µ:**
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å OpenAI API
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ `OPENAI_BASE_URL` –∫–æ—Ä—Ä–µ–∫—Ç–µ–Ω (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–∞—Å—Ç–æ–º–Ω—ã–π —ç–Ω–¥–ø–æ–∏–Ω—Ç)
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–∏–º–∏—Ç—ã –≤–∞—à–µ–≥–æ OpenAI –∞–∫–∫–∞—É–Ω—Ç–∞
- –°–µ—Ä–≤–∏—Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–≤—Ç–æ—Ä–∏—Ç –∑–∞–ø—Ä–æ—Å —Å–æ–≥–ª–∞—Å–Ω–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º `OPENAI_MAX_RETRIES`

#### ‚ùå –û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
**–ü—Ä–∏—á–∏–Ω–∞:** –ù–µ–≤–µ—Ä–Ω—ã–π `DATABASE_URL` –∏–ª–∏ –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞.

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–æ—Ä–º–∞—Ç DATABASE_URL
DATABASE_URL=postgresql://user:password@host:5432/database

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –ë–î
docker-compose ps db
docker-compose logs db
```

#### üîÑ –ö–∞–∫ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–∏—Å?
```bash
# Docker Compose
docker-compose restart gpt

# –õ–æ–∫–∞–ª—å–Ω–æ
# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø—Ä–æ—Ü–µ—Å—Å (Ctrl+C) –∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–Ω–æ–≤–∞
python -m gpt_integration.service
```

## –ú–æ–¥—É–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞

GPT Integration Service –æ–±—ä–µ–¥–∏–Ω—è–µ—Ç –≤—Å–µ AI-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –≤ –µ–¥–∏–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å:

```
gpt_integration/
‚îú‚îÄ‚îÄ ai_chat/              # –ß–∞—Ç-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç —Å –ª–∏–º–∏—Ç–∞–º–∏ –∏ –∏—Å—Ç–æ—Ä–∏–µ–π
‚îÇ   ‚îú‚îÄ‚îÄ app/             # FastAPI –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
‚îÇ   ‚îú‚îÄ‚îÄ docs/            # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –º–æ–¥—É–ª—è
‚îÇ   ‚îî‚îÄ‚îÄ tests/           # –¢–µ—Å—Ç—ã
‚îú‚îÄ‚îÄ analysis/            # –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –ø—Ä–æ–¥–∞–∂
‚îÇ   ‚îú‚îÄ‚îÄ pipeline.py      # –ü–∞–π–ø–ª–∞–π–Ω –æ–±—Ä–∞–±–æ—Ç–∫–∏
‚îÇ   ‚îî‚îÄ‚îÄ LLM_ANALYSIS_TEMPLATE.md
‚îú‚îÄ‚îÄ card_generation/     # –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–∞—Ä—Ç–æ—á–µ–∫ —Ç–æ–≤–∞—Ä–æ–≤
‚îÇ   ‚îî‚îÄ‚îÄ service.py
‚îú‚îÄ‚îÄ photo_processing/    # –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
‚îÇ   ‚îî‚îÄ‚îÄ service.py
‚îú‚îÄ‚îÄ simple_chat/         # –ü—Ä–æ—Å—Ç–æ–π —á–∞—Ç –±–µ–∑ –∏—Å—Ç–æ—Ä–∏–∏
‚îÇ   ‚îî‚îÄ‚îÄ service.py
‚îú‚îÄ‚îÄ service.py           # –ì–ª–∞–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (–æ–±—ä–µ–¥–∏–Ω—è–µ—Ç –≤—Å–µ –º–æ–¥—É–ª–∏)
‚îú‚îÄ‚îÄ gpt_client.py        # –û–±—â–∏–π –∫–ª–∏–µ–Ω—Ç OpenAI
‚îî‚îÄ‚îÄ README.md            # –≠—Ç–æ—Ç —Ñ–∞–π–ª
```

### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –µ–¥–∏–Ω–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞
- ‚úÖ –£–ø—Ä–æ—â–µ–Ω–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏ –¥–µ–ø–ª–æ–π
- ‚úÖ –û–±—â–∏–π –ø—É–ª —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π –∫ OpenAI
- ‚úÖ –ï–¥–∏–Ω–∞—è —Ç–æ—á–∫–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
- ‚úÖ –ú–µ–Ω—å—à–µ –Ω–∞–∫–ª–∞–¥–Ω—ã—Ö —Ä–∞—Å—Ö–æ–¥–æ–≤ –Ω–∞ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—É
- ‚úÖ –ü—Ä–æ—â–µ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ

## –ó–∞–º–µ—á–∞–Ω–∏—è
- –î–ª—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–≥–æ –∑–∞–ø—Ä–æ—Å–∞ –∫ —Å–µ—Ä–≤–µ—Ä—É –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∑–∞–≥–æ–ª–æ–≤–æ–∫ `X-API-SECRET-KEY`.
- –í –≤–µ–±—Ö—É–∫–µ –∫ –±–æ—Ç—É –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è ready‚Äë—Ç–µ–∫—Å—Ç –≤ MarkdownV2; –±–æ—Ç —Å–∞–º –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Ç–µ–∫—Å—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é.
- –ü—Ä–∏ –æ—à–∏–±–∫–µ –∑–∞–ø—É—Å–∫–∞ –∞–Ω–∞–ª–∏–∑–∞ —Å–µ—Ä–≤–∏—Å –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Ñ–æ–ª–±—ç–∫ —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ –±–æ—Ç–∞.
- AI Chat —Ö—Ä–∞–Ω–∏—Ç –∏—Å—Ç–æ—Ä–∏—é –≤ PostgreSQL –∏ –ø—Ä–∏–º–µ–Ω—è–µ—Ç rate limiting –Ω–∞ —É—Ä–æ–≤–Ω–µ –ë–î.
- –í—Å–µ –º–æ–¥—É–ª–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –æ–±—â–∏–π `gpt_client.py` –¥–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å OpenAI API.