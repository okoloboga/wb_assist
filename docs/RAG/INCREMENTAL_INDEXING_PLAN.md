# –ü–ª–∞–Ω —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞–ª—å–Ω–æ–π –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏ RAG

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 2025-12-16
**–í–µ—Ä—Å–∏—è:** 1.0.0
**–°—Ç–∞—Ç—É—Å:** –ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ

---

## üìã –ü—Ä–æ–±–ª–µ–º–∞

### –¢–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è: –ü–æ–ª–Ω–∞—è –ø–µ—Ä–µ–∏–Ω–¥–µ–∫—Å–∞—Ü–∏—è

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Å–µ–π—á–∞—Å:**
- –ö–∞–∂–¥—ã–µ 6 —á–∞—Å–æ–≤ –∏–∑–≤–ª–µ–∫–∞—é—Ç—Å—è –í–°–ï –¥–∞–Ω–Ω—ã–µ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 90 –¥–Ω–µ–π
- –î–ª—è –í–°–ï–• –∑–∞–ø–∏—Å–µ–π –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è —ç–º–±–µ–¥–¥–∏–Ω–≥–∏ –∑–∞–Ω–æ–≤–æ (—á–µ—Ä–µ–∑ OpenAI API)
- –ü—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è upsert (–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö, —Å–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤—ã—Ö)

**–û–±—ä–µ–º—ã –¥–∞–Ω–Ω—ã—Ö (–ø—Ä–∏–º–µ—Ä –¥–ª—è –∫–∞–±–∏–Ω–µ—Ç–∞):**
- –ó–∞–∫–∞–∑—ã: 500 –∑–∞–ø–∏—Å–µ–π
- –¢–æ–≤–∞—Ä—ã: 100 –∑–∞–ø–∏—Å–µ–π
- –û—Å—Ç–∞—Ç–∫–∏: 300 –∑–∞–ø–∏—Å–µ–π
- –û—Ç–∑—ã–≤—ã: 200 –∑–∞–ø–∏—Å–µ–π
- –ü—Ä–æ–¥–∞–∂–∏: 400 –∑–∞–ø–∏—Å–µ–π
- **–ò—Ç–æ–≥–æ:** ~1500 —á–∞–Ω–∫–æ–≤ –Ω–∞ –∏–Ω–¥–µ–∫—Å–∞—Ü–∏—é

**–ü—Ä–æ–±–ª–µ–º—ã:**

1. **–ò–∑–±—ã—Ç–æ—á–Ω—ã–µ –∑–∞—Ç—Ä–∞—Ç—ã –Ω–∞ OpenAI API** üí∏
   - 1500 —á–∞–Ω–∫–æ–≤ √ó $0.00001 = $0.015 –∑–∞ –∏–Ω–¥–µ–∫—Å–∞—Ü–∏—é
   - 4 –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏ –≤ –¥–µ–Ω—å = $0.06/–¥–µ–Ω—å
   - 30 –¥–Ω–µ–π √ó $0.06 = **$1.8/–º–µ—Å—è—Ü –Ω–∞ –∫–∞–±–∏–Ω–µ—Ç**
   - **–ù–û:** ~90% –¥–∞–Ω–Ω—ã—Ö –Ω–µ –∏–∑–º–µ–Ω–∏–ª–∏—Å—å ‚Üí **—Ç—Ä–∞—Ç–∞ –≤–ø—É—Å—Ç—É—é**

2. **–î–æ–ª–≥–æ–µ –≤—Ä–µ–º—è –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏** ‚è±Ô∏è
   - ~90 —Å–µ–∫—É–Ω–¥ –Ω–∞ –ø–æ–ª–Ω—É—é –∏–Ω–¥–µ–∫—Å–∞—Ü–∏—é
   - –ë–ª–æ–∫–∏—Ä—É–µ—Ç —Ä–µ—Å—É—Ä—Å—ã OpenAI API
   - –ù–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ –ë–î

3. **–£—Å—Ç–∞—Ä–µ–≤—à–∏–µ –¥–∞–Ω–Ω—ã–µ –Ω–µ —É–¥–∞–ª—è—é—Ç—Å—è** üóëÔ∏è
   - –¢–æ–≤–∞—Ä —Å—Ç–∞–ª –Ω–µ–∞–∫—Ç–∏–≤–Ω—ã–º ‚Üí —á–∞–Ω–∫ –æ—Å—Ç–∞–ª—Å—è –≤ RAG
   - –ó–∞–∫–∞–∑ —Å—Ç–∞—Ä—à–µ 90 –¥–Ω–µ–π ‚Üí —á–∞–Ω–∫ –æ—Å—Ç–∞–ª—Å—è –≤ RAG
   - –û—Å—Ç–∞—Ç–æ–∫ quantity=0 ‚Üí —Å—Ç–∞—Ä—ã–π —á–∞–Ω–∫ —Å quantity>0 –æ—Å—Ç–∞–ª—Å—è
   - **–†–µ–∑—É–ª—å—Ç–∞—Ç:** RAG —Å–æ–¥–µ—Ä–∂–∏—Ç –Ω–µ–∞–∫—Ç—É–∞–ª—å–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é

4. **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å** üìà
   - –ü—Ä–∏ —Ä–æ—Å—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∫–∞–±–∏–Ω–µ—Ç–æ–≤ –Ω–∞–≥—Ä—É–∑–∫–∞ —Ä–∞—Å—Ç–µ—Ç –ª–∏–Ω–µ–π–Ω–æ
   - 100 –∫–∞–±–∏–Ω–µ—Ç–æ–≤ √ó $1.8 = **$180/–º–µ—Å—è—Ü**
   - –ü—Ä–∏ –ø–æ–ª–Ω–æ–π –ø–µ—Ä–µ–∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏ –∫–∞–∂–¥–æ–≥–æ –∫–∞–±–∏–Ω–µ—Ç–∞

---

## üéØ –¶–µ–ª–∏ –∏–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞–ª—å–Ω–æ–π –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏

### –û—Å–Ω–æ–≤–Ω—ã–µ —Ü–µ–ª–∏:

1. **–≠–∫–æ–Ω–æ–º–∏—è –Ω–∞ OpenAI API**
   - –ì–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —ç–º–±–µ–¥–¥–∏–Ω–≥–∏ —Ç–æ–ª—å–∫–æ –¥–ª—è –Ω–æ–≤—ã—Ö/–∏–∑–º–µ–Ω–µ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
   - –¶–µ–ª–µ–≤–∞—è —ç–∫–æ–Ω–æ–º–∏—è: **80-90%** –∑–∞—Ç—Ä–∞—Ç

2. **–£—Å–∫–æ—Ä–µ–Ω–∏–µ –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏**
   - –û–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –¥–µ–ª—å—Ç—É –∏–∑–º–µ–Ω–µ–Ω–∏–π
   - –¶–µ–ª–µ–≤–æ–µ –≤—Ä–µ–º—è: **5-10 —Å–µ–∫—É–Ω–¥** –≤–º–µ—Å—Ç–æ 90 —Å–µ–∫—É–Ω–¥

3. **–ê–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö**
   - –£–¥–∞–ª—è—Ç—å —É—Å—Ç–∞—Ä–µ–≤—à–∏–µ —á–∞–Ω–∫–∏
   - –ì–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å RAG —Å –æ—Å–Ω–æ–≤–Ω–æ–π –ë–î

4. **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å**
   - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ 1000+ –∫–∞–±–∏–Ω–µ—Ç–æ–≤ –±–µ–∑ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–≥–æ —Ä–æ—Å—Ç–∞ –Ω–∞–≥—Ä—É–∑–∫–∏

---

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Ä–µ—à–µ–Ω–∏—è

### –°—Ç—Ä–∞—Ç–µ–≥–∏—è: Event-driven –∏–Ω–¥–µ–∫—Å–∞—Ü–∏—è

**–î–≤–∞ —Ç–∏–ø–∞ –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏:**

### 1. –ò–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞–ª—å–Ω–∞—è –∏–Ω–¥–µ–∫—Å–∞—Ü–∏—è (Incremental) - Event-driven
- **–¢—Ä–∏–≥–≥–µ—Ä:** –ü–æ—Å–ª–µ –∫–∞–∂–¥–æ–π —É—Å–ø–µ—à–Ω–æ–π —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ WB API (–∫–∞–∂–¥—ã–µ 15 –º–∏–Ω—É—Ç)
- **–ü—Ä–æ—Ü–µ—Å—Å:**
  - WB —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è —É—Å–ø–µ—à–Ω–æ
  - –ü–µ—Ä–µ–¥–∞–µ—Ç—Å—è –¥–µ–ª—å—Ç–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π (new/updated IDs) –∏–∑ sync task
  - –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ —Ç–æ–ª—å–∫–æ –∏–∑–º–µ–Ω–µ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –ø–æ –ø–µ—Ä–µ–¥–∞–Ω–Ω—ã–º ID
  - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤ —Ç–æ–ª—å–∫–æ –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏–π
  - Upsert –≤ –≤–µ–∫—Ç–æ—Ä–Ω—É—é –ë–î
  - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ `last_incremental_at`

- **–¶–µ–ª—å:** –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –±—ã—Å—Ç—Ä–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è RAG —Å –æ—Å–Ω–æ–≤–Ω–æ–π –ë–î
- **–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
  - –ì–æ—Ç–æ–≤–∞—è –¥–µ–ª—å—Ç–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π –∏–∑ sync task (–Ω–µ –Ω—É–∂–Ω–æ –∑–∞–ø—Ä–∞—à–∏–≤–∞—Ç—å –ø–æ timestamp)
  - –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö (RAG –≤—Å–µ–≥–¥–∞ –∞–∫—Ç—É–∞–ª–µ–Ω –ø–æ—Å–ª–µ WB sync)
  - –ü—Ä–æ—Å—Ç–æ—Ç–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã (–Ω–µ—Ç –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ–≥–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è)
  - **–õ–æ–≥–∏–∫–∞:** –ï—Å–ª–∏ WB —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å–±–æ–∏—Ç ‚Üí –∏–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞—Ç—å –Ω–µ—á–µ–≥–æ

### 2. –ü–æ–ª–Ω–∞—è –ø–µ—Ä–µ–∏–Ω–¥–µ–∫—Å–∞—Ü–∏—è (Full Rebuild) - Scheduled
- **–ß–∞—Å—Ç–æ—Ç–∞:** –†–∞–∑ –≤ –Ω–µ–¥–µ–ª—é (–≤–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ, 03:00 UTC)
- **–ü—Ä–æ—Ü–µ—Å—Å:**
  - –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –í–°–ï–• –∞–∫—Ç—É–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
  - –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è —É—Å—Ç–∞—Ä–µ–≤—à–∏—Ö —á–∞–Ω–∫–æ–≤ (–Ω–µ –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö –≤ –∞–∫—Ç—É–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö)
  - –£–¥–∞–ª–µ–Ω–∏–µ —É—Å—Ç–∞—Ä–µ–≤—à–∏—Ö —á–∞–Ω–∫–æ–≤
  - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤ –¥–ª—è –Ω–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö
  - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ `last_indexed_at`

- **–¶–µ–ª—å:** –ì–∞—Ä–∞–Ω—Ç–∏—è –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏, –æ—á–∏—Å—Ç–∫–∞ —É—Å—Ç–∞—Ä–µ–≤—à–∏—Ö –¥–∞–Ω–Ω—ã—Ö

---

## üìä –î–µ—Ç–∞–ª—å–Ω—ã–π –¥–∏–∑–∞–π–Ω

### –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –ø–æ–ª–µ–π –≤ `RAGIndexStatus`:**
- `last_indexed_at` ‚Üí –í—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–Ω–µ–π **–ø–æ–ª–Ω–æ–π** –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏
- `last_incremental_at` ‚Üí –í—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–Ω–µ–π **–∏–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞–ª—å–Ω–æ–π** –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏ (—É–∂–µ –µ—Å—Ç—å –≤ –º–æ–¥–µ–ª–∏!)

**–ù–æ–≤–æ–µ –ø–æ–ª–µ –≤ `RAGMetadata` (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):**
- `last_seen_at` ‚Üí Timestamp –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è –∑–∞–ø–∏—Å–∏ –≤ –æ—Å–Ω–æ–≤–Ω–æ–π –ë–î
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è soft delete —É—Å—Ç–∞—Ä–µ–≤—à–∏—Ö –¥–∞–Ω–Ω—ã—Ö

---

### –ê–ª–≥–æ—Ä–∏—Ç–º –∏–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞–ª—å–Ω–æ–π –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏ (Event-driven)

**–≠—Ç–∞–ø 0: –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–µ–ª—å—Ç—ã –æ—Ç WB sync**

WB sync task –∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è —É—Å–ø–µ—à–Ω–æ –∏ –ø–µ—Ä–µ–¥–∞–µ—Ç –¥–µ–ª—å—Ç—É –∏–∑–º–µ–Ω–µ–Ω–∏–π:
```python
{
    "cabinet_id": 1,
    "changed_ids": {
        "orders": [12345, 12346, 12347],  # –ù–æ–≤—ã–µ –∏–ª–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ
        "products": [98765, 98766],
        "stocks": [11111, 11112, 11113],
        "reviews": [55555],
        "sales": [77777, 77778]
    }
}
```

**–≠—Ç–∞–ø 1: –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –ø–æ –¥–µ–ª—å—Ç–µ**

–í–º–µ—Å—Ç–æ –∑–∞–ø—Ä–æ—Å–æ–≤ –ø–æ timestamp, –∏—Å–ø–æ–ª—å–∑—É–µ–º –≥–æ—Ç–æ–≤—É—é –¥–µ–ª—å—Ç—É:

**A. –î–ª—è —Ç–∞–±–ª–∏—Ü —Å –ø–µ—Ä–µ–¥–∞–Ω–Ω—ã–º–∏ ID:**
```sql
-- –ó–∞–∫–∞–∑—ã
SELECT * FROM wb_orders
WHERE cabinet_id = ?
  AND id IN (12345, 12346, 12347)
  AND order_date >= NOW() - INTERVAL '90 days';

-- –¢–æ–≤–∞—Ä—ã
SELECT * FROM wb_products
WHERE cabinet_id = ?
  AND id IN (98765, 98766)
  AND is_active = true;
```

**B. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è:**
- –ò—Å–ø–æ–ª—å–∑—É–µ–º `IN (...)` –≤–º–µ—Å—Ç–æ –¥–∏–∞–ø–∞–∑–æ–Ω–æ–≤ –ø–æ timestamp
- –ì–æ—Ä–∞–∑–¥–æ –±—ã—Å—Ç—Ä–µ–µ (indexed lookup)
- –ù–µ—Ç —Ä–∏—Å–∫–∞ –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è

**C. –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è —É–¥–∞–ª–µ–Ω–Ω—ã—Ö/—É—Å—Ç–∞—Ä–µ–≤—à–∏—Ö –∑–∞–ø–∏—Å–µ–π:**
- –û–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤ –ø–æ–ª–Ω–æ–π –ø–µ—Ä–µ–∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏ (Full Rebuild)
- Event-driven –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Ç–æ–ª—å–∫–æ –∞–∫—Ç–∏–≤–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

**–≠—Ç–∞–ø 2: –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π**

1. **–ù–æ–≤—ã–µ –∑–∞–ø–∏—Å–∏:**
   - –°–æ–∑–¥–∞—Ç—å —á–∞–Ω–∫
   - –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —ç–º–±–µ–¥–¥–∏–Ω–≥
   - INSERT –≤ RAG

2. **–ò–∑–º–µ–Ω–µ–Ω–Ω—ã–µ –∑–∞–ø–∏—Å–∏:**
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, –∏–∑–º–µ–Ω–∏–ª—Å—è –ª–∏ chunk_text (—Å—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø–æ hash)
   - –ï—Å–ª–∏ –∏–∑–º–µ–Ω–∏–ª—Å—è:
     - –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π —á–∞–Ω–∫
     - –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —ç–º–±–µ–¥–¥–∏–Ω–≥
     - UPDATE –≤ RAG
   - –ï—Å–ª–∏ –Ω–µ –∏–∑–º–µ–Ω–∏–ª—Å—è:
     - –ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å (—ç–∫–æ–Ω–æ–º–∏—è API)

3. **–£–¥–∞–ª–µ–Ω–Ω—ã–µ/—É—Å—Ç–∞—Ä–µ–≤—à–∏–µ –∑–∞–ø–∏—Å–∏:**
   - –ü–æ–º–µ—Ç–∏—Ç—å `last_seen_at` = NULL –∏–ª–∏ —É–¥–∞–ª–∏—Ç—å
   - –û—á–∏—Å—Ç–∫–∞ –≤ –ø–æ–ª–Ω–æ–π –ø–µ—Ä–µ–∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏

**–≠—Ç–∞–ø 3: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞**
- –û–±–Ω–æ–≤–∏—Ç—å `last_incremental_at = NOW()`
- –û–±–Ω–æ–≤–∏—Ç—å `total_chunks` (–µ—Å–ª–∏ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å)

---

### –ê–ª–≥–æ—Ä–∏—Ç–º –ø–æ–ª–Ω–æ–π –ø–µ—Ä–µ–∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏

**–≠—Ç–∞–ø 1: –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –∞–∫—Ç—É–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö**
- –ò–∑–≤–ª–µ—á—å –í–°–ï –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (–∫–∞–∫ —Å–µ–π—á–∞—Å)
- –°–æ–∑–¥–∞—Ç—å —Å–ø–∏—Å–æ–∫ –∞–∫—Ç—É–∞–ª—å–Ω—ã—Ö (cabinet_id, source_table, source_id)

**–≠—Ç–∞–ø 2: –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è —É—Å—Ç–∞—Ä–µ–≤—à–∏—Ö —á–∞–Ω–∫–æ–≤**
```
–ê–∫—Ç—É–∞–ª—å–Ω—ã–µ —á–∞–Ω–∫–∏:
- (1, 'wb_orders', 12345)
- (1, 'wb_products', 98765)
- ...

–ß–∞–Ω–∫–∏ –≤ RAG:
- (1, 'wb_orders', 12345) ‚úÖ –ê–∫—Ç—É–∞–ª—å–Ω—ã–π
- (1, 'wb_orders', 11111) ‚ùå –£—Å—Ç–∞—Ä–µ–≤—à–∏–π (–Ω–µ –Ω–∞–π–¥–µ–Ω –≤ –∞–∫—Ç—É–∞–ª—å–Ω—ã—Ö)
- (1, 'wb_products', 98765) ‚úÖ –ê–∫—Ç—É–∞–ª—å–Ω—ã–π
- (1, 'wb_products', 55555) ‚ùå –£—Å—Ç–∞—Ä–µ–≤—à–∏–π (—Ç–æ–≤–∞—Ä –Ω–µ–∞–∫—Ç–∏–≤–µ–Ω)

–£–¥–∞–ª–∏—Ç—å:
- (1, 'wb_orders', 11111)
- (1, 'wb_products', 55555)
```

**–≠—Ç–∞–ø 3: –û–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö**

1. **–£–¥–∞–ª–µ–Ω–∏–µ —É—Å—Ç–∞—Ä–µ–≤—à–∏—Ö:**
   - DELETE FROM rag_embeddings WHERE metadata_id IN (...)
   - DELETE FROM rag_metadata WHERE id IN (...)

2. **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö:**
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å chunk_text (—Å—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø–æ hash)
   - –ï—Å–ª–∏ –∏–∑–º–µ–Ω–∏–ª—Å—è ‚Üí UPDATE —Å –Ω–æ–≤—ã–º —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–º
   - –ï—Å–ª–∏ –Ω–µ –∏–∑–º–µ–Ω–∏–ª—Å—è ‚Üí –ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å

3. **–°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤—ã—Ö:**
   - INSERT –Ω–æ–≤—ã–µ —á–∞–Ω–∫–∏ —Å —ç–º–±–µ–¥–¥–∏–Ω–≥–∞–º–∏

**–≠—Ç–∞–ø 4: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞**
- –û–±–Ω–æ–≤–∏—Ç—å `last_indexed_at = NOW()`
- –û–±–Ω–æ–≤–∏—Ç—å `last_incremental_at = NOW()`
- –û–±–Ω–æ–≤–∏—Ç—å `total_chunks`

---

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è: Hash-based change detection

**–ü—Ä–æ–±–ª–µ–º–∞:**
–ö–∞–∫ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å, –∏–∑–º–µ–Ω–∏–ª—Å—è –ª–∏ chunk_text –±–µ–∑ —Å—Ä–∞–≤–Ω–µ–Ω–∏—è —Å—Ç—Ä–æ–∫?

**–†–µ—à–µ–Ω–∏–µ:**
–î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª–µ `chunk_hash` –≤ `RAGMetadata`:
- `chunk_hash` ‚Üí SHA256 hash –æ—Ç chunk_text
- –ü—Ä–∏ –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏ —Å—Ä–∞–≤–Ω–∏–≤–∞—Ç—å hash –≤–º–µ—Å—Ç–æ —Ç–µ–∫—Å—Ç–∞
- –ï—Å–ª–∏ hash —Å–æ–≤–ø–∞–¥–∞–µ—Ç ‚Üí —á–∞–Ω–∫ –Ω–µ –∏–∑–º–µ–Ω–∏–ª—Å—è, –ø—Ä–æ–ø—É—Å–∫–∞–µ–º –≥–µ–Ω–µ—Ä–∞—Ü–∏—é —ç–º–±–µ–¥–¥–∏–Ω–≥–∞

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- –ë—ã—Å—Ç—Ä–æ–µ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ (integer vs string)
- –≠–∫–æ–Ω–æ–º–∏—è –ø–∞–º—è—Ç–∏ –≤ —Å—Ä–∞–≤–Ω–µ–Ω–∏–∏ —Å–æ —Å—Ç—Ä–æ–∫–∞–º–∏
- –ò–Ω–¥–µ–∫—Å–∏—Ä—É–µ–º–æ–µ –ø–æ–ª–µ –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞

---

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è: Batch –æ–ø–µ—Ä–∞—Ü–∏–∏

**–ü—Ä–æ–±–ª–µ–º–∞:**
–£–¥–∞–ª–µ–Ω–∏–µ/–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ –æ–¥–Ω–æ–π –∑–∞–ø–∏—Å–∏ –º–µ–¥–ª–µ–Ω–Ω–æ

**–†–µ—à–µ–Ω–∏–µ:**
–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å batch –æ–ø–µ—Ä–∞—Ü–∏–∏:
- Bulk DELETE –¥–ª—è —É—Å—Ç–∞—Ä–µ–≤—à–∏—Ö —á–∞–Ω–∫–æ–≤
- Bulk UPDATE –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–Ω—ã—Ö —á–∞–Ω–∫–æ–≤
- Bulk INSERT –¥–ª—è –Ω–æ–≤—ã—Ö —á–∞–Ω–∫–æ–≤

---

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –º–µ—Ç—Ä–∏–∫–∏

**–ù–æ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏ –¥–ª—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è:**

1. **–ò–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞–ª—å–Ω–∞—è –∏–Ω–¥–µ–∫—Å–∞—Ü–∏—è:**
   - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–æ–≤—ã—Ö —á–∞–Ω–∫–æ–≤
   - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏–∑–º–µ–Ω–µ–Ω–Ω—ã—Ö —á–∞–Ω–∫–æ–≤
   - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ–ø—É—â–µ–Ω–Ω—ã—Ö —á–∞–Ω–∫–æ–≤ (–Ω–µ –∏–∑–º–µ–Ω–∏–ª–∏—Å—å)
   - –í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
   - –°—Ç–æ–∏–º–æ—Å—Ç—å API (–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤)

2. **–ü–æ–ª–Ω–∞—è –ø–µ—Ä–µ–∏–Ω–¥–µ–∫—Å–∞—Ü–∏—è:**
   - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —É–¥–∞–ª–µ–Ω–Ω—ã—Ö —á–∞–Ω–∫–æ–≤ (—É—Å—Ç–∞—Ä–µ–≤—à–∏–µ)
   - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã—Ö —á–∞–Ω–∫–æ–≤
   - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–æ–≤—ã—Ö —á–∞–Ω–∫–æ–≤
   - –í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
   - –°—Ç–æ–∏–º–æ—Å—Ç—å API

3. **–°—Ä–∞–≤–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏:**
   - –≠–∫–æ–Ω–æ–º–∏—è API (% —Å–Ω–∏–∂–µ–Ω–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤)
   - –£—Å–∫–æ—Ä–µ–Ω–∏–µ –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏ (% —Å–Ω–∏–∂–µ–Ω–∏—è –≤—Ä–µ–º–µ–Ω–∏)
   - –ê–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö (% —É—Å—Ç–∞—Ä–µ–≤—à–∏—Ö —á–∞–Ω–∫–æ–≤)

---

## üìÖ –ü–ª–∞–Ω —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

### –≠—Ç–∞–ø 1: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ (1-2 –¥–Ω—è)

**–ó–∞–¥–∞—á–∏:**
1. –ê–Ω–∞–ª–∏–∑ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Ç–∞–±–ª–∏—Ü –æ—Å–Ω–æ–≤–Ω–æ–π –ë–î:
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–ª–∏—á–∏–µ `updated_at` –≤ —Ç–∞–±–ª–∏—Ü–∞—Ö
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–ª–∏—á–∏–µ `created_at` –≤ —Ç–∞–±–ª–∏—Ü–∞—Ö
   - –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Å—Ç—Ä–∞—Ç–µ–≥–∏—é –¥–ª—è —Ç–∞–±–ª–∏—Ü –±–µ–∑ timestamp –ø–æ–ª–µ–π

2. –ü—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ —Å—Ö–µ–º–µ –ë–î:
   - –î–æ–±–∞–≤–∏—Ç—å `chunk_hash` –≤ `RAGMetadata` (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
   - –°–æ–∑–¥–∞—Ç—å –∏–Ω–¥–µ–∫—Å—ã –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –∑–∞–ø—Ä–æ—Å–æ–≤

3. –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤:
   - –ù–æ–≤—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–ª—è API `/v1/rag/index/{cabinet_id}`
   - –ü–∞—Ä–∞–º–µ—Ç—Ä `full_rebuild=true/false`

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –î–µ—Ç–∞–ª—å–Ω–∞—è —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π

---

### –≠—Ç–∞–ø 2: –ò–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞–ª—å–Ω–∞—è –∏–Ω–¥–µ–∫—Å–∞—Ü–∏—è (2-3 –¥–Ω—è)

**–ó–∞–¥–∞—á–∏:**
1. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –º–µ—Ç–æ–¥ `extract_incremental_changes()` –≤ `RAGIndexer`:
   - –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–∏–ø–∞ –¥–∞–Ω–Ω—ã—Ö
   - –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ `last_incremental_at`
   - –í–æ–∑–≤—Ä–∞—Ç —Å–ø–∏—Å–∫–∞ (–Ω–æ–≤—ã–µ, –∏–∑–º–µ–Ω–µ–Ω–Ω—ã–µ, —É–¥–∞–ª–µ–Ω–Ω—ã–µ)

2. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –º–µ—Ç–æ–¥ `process_incremental_changes()`:
   - –û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–æ–≤—ã—Ö –∑–∞–ø–∏—Å–µ–π
   - –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–Ω—ã—Ö –∑–∞–ø–∏—Å–µ–π (—Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π hash)
   - –ü—Ä–æ–ø—É—Å–∫ –Ω–µ–∏–∑–º–µ–Ω–µ–Ω–Ω—ã—Ö –∑–∞–ø–∏—Å–µ–π

3. –î–æ–±–∞–≤–∏—Ç—å hash-based change detection:
   - –ú–µ—Ç–æ–¥ `calculate_chunk_hash(chunk_text)`
   - –°—Ä–∞–≤–Ω–µ–Ω–∏–µ hash –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π

4. –û–±–Ω–æ–≤–∏—Ç—å Celery task `index_rag_for_cabinet`:
   - –î–æ–±–∞–≤–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä `full_rebuild=False` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
   - –†–æ—É—Ç–∏–Ω–≥ –Ω–∞ –∏–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞–ª—å–Ω—É—é –∏–ª–∏ –ø–æ–ª–Ω—É—é –∏–Ω–¥–µ–∫—Å–∞—Ü–∏—é

5. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:
   - Unit —Ç–µ—Å—Ç—ã –¥–ª—è –Ω–æ–≤—ã—Ö –º–µ—Ç–æ–¥–æ–≤
   - Integration —Ç–µ—Å—Ç—ã –¥–ª—è –∏–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞–ª—å–Ω–æ–π –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –†–∞–±–æ—á–∞—è –∏–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞–ª—å–Ω–∞—è –∏–Ω–¥–µ–∫—Å–∞—Ü–∏—è

---

### –≠—Ç–∞–ø 3: –ü–æ–ª–Ω–∞—è –ø–µ—Ä–µ–∏–Ω–¥–µ–∫—Å–∞—Ü–∏—è (2-3 –¥–Ω—è)

**–ó–∞–¥–∞—á–∏:**
1. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –º–µ—Ç–æ–¥ `identify_stale_chunks()`:
   - –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –∞–∫—Ç—É–∞–ª—å–Ω—ã—Ö (cabinet_id, source_table, source_id)
   - –°—Ä–∞–≤–Ω–∏—Ç—å —Å —á–∞–Ω–∫–∞–º–∏ –≤ RAG
   - –í–µ—Ä–Ω—É—Ç—å —Å–ø–∏—Å–æ–∫ —É—Å—Ç–∞—Ä–µ–≤—à–∏—Ö —á–∞–Ω–∫–æ–≤ –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è

2. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –º–µ—Ç–æ–¥ `cleanup_stale_chunks()`:
   - Batch DELETE —É—Å—Ç–∞—Ä–µ–≤—à–∏—Ö —á–∞–Ω–∫–æ–≤
   - –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —É–¥–∞–ª–µ–Ω–Ω—ã—Ö –∑–∞–ø–∏—Å–µ–π

3. –û–±–Ω–æ–≤–∏—Ç—å –º–µ—Ç–æ–¥ `index_cabinet()`:
   - –î–æ–±–∞–≤–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä `full_rebuild=True/False`
   - –ü—Ä–∏ `full_rebuild=True`:
     - –û—á–∏—Å—Ç–∫–∞ —É—Å—Ç–∞—Ä–µ–≤—à–∏—Ö —á–∞–Ω–∫–æ–≤
     - –ü–æ–ª–Ω–∞—è –ø–µ—Ä–µ–∏–Ω–¥–µ–∫—Å–∞—Ü–∏—è —Å hash-based –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–µ–π
     - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ `last_indexed_at`

4. –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—É—é Celery task `full_rebuild_rag_for_cabinet`:
   - Wrapper –¥–ª—è `index_rag_for_cabinet(full_rebuild=True)`

5. –û–±–Ω–æ–≤–∏—Ç—å Celery Beat schedule:
   - –ò–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞–ª—å–Ω–∞—è: –∫–∞–∂–¥—ã–µ 6 —á–∞—Å–æ–≤
   - –ü–æ–ª–Ω–∞—è: –≤–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ, 03:00 UTC

6. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:
   - Unit —Ç–µ—Å—Ç—ã –¥–ª—è –Ω–æ–≤—ã—Ö –º–µ—Ç–æ–¥–æ–≤
   - Integration —Ç–µ—Å—Ç—ã –¥–ª—è –ø–æ–ª–Ω–æ–π –ø–µ—Ä–µ–∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏
   - E2E —Ç–µ—Å—Ç—ã –¥–ª—è —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ —É–¥–∞–ª–µ–Ω–∏—è —É—Å—Ç–∞—Ä–µ–≤—à–∏—Ö –¥–∞–Ω–Ω—ã—Ö

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –†–∞–±–æ—á–∞—è –ø–æ–ª–Ω–∞—è –ø–µ—Ä–µ–∏–Ω–¥–µ–∫—Å–∞—Ü–∏—è —Å –æ—á–∏—Å—Ç–∫–æ–π

---

### –≠—Ç–∞–ø 4: –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ (1 –¥–µ–Ω—å)

**–ó–∞–¥–∞—á–∏:**
1. –î–æ–±–∞–≤–∏—Ç—å –¥–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –º–µ—Ç—Ä–∏–∫:
   - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–æ–≤—ã—Ö/–∏–∑–º–µ–Ω–µ–Ω–Ω—ã—Ö/–ø—Ä–æ–ø—É—â–µ–Ω–Ω—ã—Ö/—É–¥–∞–ª–µ–Ω–Ω—ã—Ö —á–∞–Ω–∫–æ–≤
   - –í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–∞–∂–¥–æ–≥–æ —ç—Ç–∞–ø–∞
   - –°—Ç–æ–∏–º–æ—Å—Ç—å API (–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ OpenAI)

2. –î–æ–±–∞–≤–∏—Ç—å endpoint `/v1/rag/metrics/{cabinet_id}`:
   - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–π –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏
   - –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å –ø—Ä–µ–¥—ã–¥—É—â–µ–π –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–µ–π
   - –¢—Ä–µ–Ω–¥—ã (—ç–∫–æ–Ω–æ–º–∏—è API, —É—Å–∫–æ—Ä–µ–Ω–∏–µ)

3. Dashboard –º–µ—Ç—Ä–∏–∫ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):
   - Grafana dashboard —Å –º–µ—Ç—Ä–∏–∫–∞–º–∏ –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏
   - –ê–ª–µ—Ä—Ç—ã –ø—Ä–∏ –∞–Ω–æ–º–∞–ª–∏—è—Ö (—Å–ª–∏—à–∫–æ–º –¥–æ–ª–≥–∞—è –∏–Ω–¥–µ–∫—Å–∞—Ü–∏—è, –±–æ–ª—å—à–∏–µ –∑–∞—Ç—Ä–∞—Ç—ã API)

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –°–∏—Å—Ç–µ–º–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏

---

### –≠—Ç–∞–ø 5: –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (2-3 –¥–Ω—è)

**–ó–∞–¥–∞—á–∏:**
1. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏:
   - Batch –æ–ø–µ—Ä–∞—Ü–∏–∏ –¥–ª—è –ë–î
   - –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —á–∞–Ω–∫–æ–≤ (–µ—Å–ª–∏ –≤–æ–∑–º–æ–∂–Ω–æ)
   - –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ frequently accessed data

2. –ù–∞–≥—Ä—É–∑–æ—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:
   - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ –±–æ–ª—å—à–∏—Ö –∫–∞–±–∏–Ω–µ—Ç–∞—Ö (10,000+ —á–∞–Ω–∫–æ–≤)
   - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–π –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∫–∞–±–∏–Ω–µ—Ç–æ–≤
   - –ò–∑–º–µ—Ä–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –∏ –∑–∞—Ç—Ä–∞—Ç API

3. –†–µ–≥—Ä–µ—Å—Å–∏–æ–Ω–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ —Å AI-—á–∞—Ç–æ–º
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–µ–∫—Ç–æ—Ä–Ω–æ–≥–æ –ø–æ–∏—Å–∫–∞ –ø–æ—Å–ª–µ –∏–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞–ª—å–Ω–æ–π –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏

4. –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:
   - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ `RAG_INDEXING_SETUP.md`
   - –°–æ–∑–¥–∞–Ω–∏–µ `INCREMENTAL_INDEXING_GUIDE.md`
   - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** Production-ready —Ä–µ—à–µ–Ω–∏–µ

---

### –≠—Ç–∞–ø 6: –î–µ–ø–ª–æ–π –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ (1-2 –¥–Ω—è)

**–ó–∞–¥–∞—á–∏:**
1. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ –¥–µ–ø–ª–æ—é:
   - –ú–∏–≥—Ä–∞—Ü–∏–∏ –ë–î (–¥–æ–±–∞–≤–ª–µ–Ω–∏–µ `chunk_hash`, –∏–Ω–¥–µ–∫—Å—ã)
   - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
   - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ docker-compose.yml (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)

2. –î–µ–ø–ª–æ–π –≤ production:
   - –ü–æ—ç—Ç–∞–ø–Ω—ã–π –¥–µ–ø–ª–æ–π (canary deployment)
   - –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø–µ—Ä–≤—ã—Ö –∏–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞–ª—å–Ω—ã—Ö –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–π
   - –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø–µ—Ä–≤–æ–π –ø–æ–ª–Ω–æ–π –ø–µ—Ä–µ–∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏

3. –°–±–æ—Ä –º–µ—Ç—Ä–∏–∫:
   - –≠–∫–æ–Ω–æ–º–∏—è API (—Ä–µ–∞–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è)
   - –£—Å–∫–æ—Ä–µ–Ω–∏–µ –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏ (—Ä–µ–∞–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è)
   - –ö–∞—á–µ—Å—Ç–≤–æ RAG (A/B —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç–≤–µ—Ç–æ–≤ AI)

4. –î–æ—Ä–∞–±–æ—Ç–∫–∏ –ø–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º:
   - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ (batch size, threshold –∏ —Ç.–¥.)
   - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–∞–≥–æ–≤ (–µ—Å–ª–∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω—ã)

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –°—Ç–∞–±–∏–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞ –≤ production

---

## üìä –û–∂–∏–¥–∞–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

### –ú–µ—Ç—Ä–∏–∫–∏ —É—Å–ø–µ—Ö–∞

**1. –≠–∫–æ–Ω–æ–º–∏—è –Ω–∞ OpenAI API:**
- **–î–æ:** 1500 —á–∞–Ω–∫–æ–≤ √ó $0.00001 = $0.015 –∑–∞ –∏–Ω–¥–µ–∫—Å–∞—Ü–∏—é (–∫–∞–∂–¥—ã–µ 6 —á–∞—Å–æ–≤)
- **–ü–æ—Å–ª–µ:** ~150 —á–∞–Ω–∫–æ–≤ (10% –∏–∑–º–µ–Ω–µ–Ω–∏–π) √ó $0.00001 = $0.0015 –∑–∞ –∏–Ω–¥–µ–∫—Å–∞—Ü–∏—é
- **–≠–∫–æ–Ω–æ–º–∏—è:** **90%** –∑–∞—Ç—Ä–∞—Ç –Ω–∞ –∏–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞–ª—å–Ω—É—é –∏–Ω–¥–µ–∫—Å–∞—Ü–∏—é
- **–ú–µ—Å—è—á–Ω–∞—è —ç–∫–æ–Ω–æ–º–∏—è (–Ω–∞ –∫–∞–±–∏–Ω–µ—Ç):**
  - –î–æ: 4 –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏/–¥–µ–Ω—å √ó 30 –¥–Ω–µ–π √ó $0.015 = **$1.8/–º–µ—Å—è—Ü**
  - –ü–æ—Å–ª–µ: (3 –∏–Ω–∫—Ä–µ–º–µ–Ω—Ç. √ó $0.0015 + 1 –ø–æ–ª–Ω–∞—è √ó $0.015) √ó 30 –¥–Ω–µ–π = **$0.45/–º–µ—Å—è—Ü**
  - **–≠–∫–æ–Ω–æ–º–∏—è: $1.35/–º–µ—Å—è—Ü (75%) –Ω–∞ –∫–∞–±–∏–Ω–µ—Ç**
  - **–î–ª—è 100 –∫–∞–±–∏–Ω–µ—Ç–æ–≤: $135/–º–µ—Å—è—Ü —ç–∫–æ–Ω–æ–º–∏–∏**

**2. –£—Å–∫–æ—Ä–µ–Ω–∏–µ –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏:**
- **–î–æ:** ~90 —Å–µ–∫—É–Ω–¥ –Ω–∞ –ø–æ–ª–Ω—É—é –∏–Ω–¥–µ–∫—Å–∞—Ü–∏—é
- **–ü–æ—Å–ª–µ:** ~10 —Å–µ–∫—É–Ω–¥ –Ω–∞ –∏–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞–ª—å–Ω—É—é –∏–Ω–¥–µ–∫—Å–∞—Ü–∏—é
- **–£—Å–∫–æ—Ä–µ–Ω–∏–µ:** **9x** –¥–ª—è –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–∞ –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–π

**3. –ê–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö:**
- **–î–æ:** –£—Å—Ç–∞—Ä–µ–≤—à–∏–µ –¥–∞–Ω–Ω—ã–µ –Ω–∞–∫–∞–ø–ª–∏–≤–∞—é—Ç—Å—è –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ
- **–ü–æ—Å–ª–µ:** –û—á–∏—Å—Ç–∫–∞ —É—Å—Ç–∞—Ä–µ–≤—à–∏—Ö –¥–∞–Ω–Ω—ã—Ö —Ä–∞–∑ –≤ –Ω–µ–¥–µ–ª—é
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** RAG —Å–æ–¥–µ—Ä–∂–∏—Ç —Ç–æ–ª—å–∫–æ –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

**4. –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å:**
- **–î–æ:** –õ–∏–Ω–µ–π–Ω—ã–π —Ä–æ—Å—Ç –Ω–∞–≥—Ä—É–∑–∫–∏ —Å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –∫–∞–±–∏–Ω–µ—Ç–æ–≤
- **–ü–æ—Å–ª–µ:** –°—É–±—Ñ–∏–Ω–µ–π–Ω—ã–π —Ä–æ—Å—Ç (–∏–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞–ª—å–Ω—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –º–∞—Å—à—Ç–∞–±–∏—Ä—É—é—Ç—Å—è –ª—É—á—à–µ)

---

## ‚ö†Ô∏è –†–∏—Å–∫–∏ –∏ –º–∏—Ç–∏–≥–∞—Ü–∏–∏

### –†–∏—Å–∫ 1: –¢–∞–±–ª–∏—Ü—ã –±–µ–∑ `updated_at`

**–ü—Ä–æ–±–ª–µ–º–∞:**
–ù–µ–∫–æ—Ç–æ—Ä—ã–µ —Ç–∞–±–ª–∏—Ü—ã –º–æ–≥—É—Ç –Ω–µ –∏–º–µ—Ç—å `updated_at` –ø–æ–ª—è

**–ú–∏—Ç–∏–≥–∞—Ü–∏—è:**
- –°—Ç—Ä–∞—Ç–µ–≥–∏—è 1: –î–æ–±–∞–≤–∏—Ç—å `updated_at` –≤ —Ç–∞–±–ª–∏—Ü—ã (—Ç—Ä–µ–±—É–µ—Ç –º–∏–≥—Ä–∞—Ü–∏–∏)
- –°—Ç—Ä–∞—Ç–µ–≥–∏—è 2: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å snapshot-based diff
- –°—Ç—Ä–∞—Ç–µ–≥–∏—è 3: –î–ª—è —Ç–∞–±–ª–∏—Ü –±–µ–∑ `updated_at` –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–æ–ª–Ω—É—é –∏–Ω–¥–µ–∫—Å–∞—Ü–∏—é

**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞ –≠—Ç–∞–ø–µ 1, –≤—ã–±—Ä–∞—Ç—å —Å—Ç—Ä–∞—Ç–µ–≥–∏—é

---

### –†–∏—Å–∫ 2: –ü—Ä–æ–ø—É—Å–∫ –∏–∑–º–µ–Ω–µ–Ω–∏–π

**–ü—Ä–æ–±–ª–µ–º–∞:**
–ò–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞–ª—å–Ω–∞—è –∏–Ω–¥–µ–∫—Å–∞—Ü–∏—è –º–æ–∂–µ—Ç –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø—Ä–∏ —Å–±–æ—è—Ö

**–ú–∏—Ç–∏–≥–∞—Ü–∏—è:**
- –ü–æ–ª–Ω–∞—è –ø–µ—Ä–µ–∏–Ω–¥–µ–∫—Å–∞—Ü–∏—è —Ä–∞–∑ –≤ –Ω–µ–¥–µ–ª—é (safety net)
- Retry –ª–æ–≥–∏–∫–∞ –¥–ª—è –∏–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞–ª—å–Ω–æ–π –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –º–µ—Ç—Ä–∏–∫ (–∞–ª–µ—Ä—Ç—ã –ø—Ä–∏ –∞–Ω–æ–º–∞–ª–∏—è—Ö)

---

### –†–∏—Å–∫ 3: Race conditions

**–ü—Ä–æ–±–ª–µ–º–∞:**
–ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –∏–Ω–¥–µ–∫—Å–∞—Ü–∏—è –∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –æ—Å–Ω–æ–≤–Ω–æ–π –ë–î

**–ú–∏—Ç–∏–≥–∞—Ü–∏—è:**
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –ø—Ä–∏ –∏–∑–≤–ª–µ—á–µ–Ω–∏–∏ –¥–∞–Ω–Ω—ã—Ö
- Snapshot isolation level –¥–ª—è –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏
- Lock –Ω–∞ —É—Ä–æ–≤–Ω–µ –∫–∞–±–∏–Ω–µ—Ç–∞ (prevent concurrent indexing)

---

### –†–∏—Å–∫ 4: –£–≤–µ–ª–∏—á–µ–Ω–∏–µ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ –∫–æ–¥–∞

**–ü—Ä–æ–±–ª–µ–º–∞:**
–ò–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞–ª—å–Ω–∞—è –∏–Ω–¥–µ–∫—Å–∞—Ü–∏—è –¥–æ–±–∞–≤–ª—è–µ—Ç —Å–ª–æ–∂–Ω–æ—Å—Ç—å

**–ú–∏—Ç–∏–≥–∞—Ü–∏—è:**
- –ß–µ—Ç–∫–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏
- Comprehensive —Ç–µ—Å—Ç—ã (unit, integration, e2e)
- –ü–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- Code review

---

## üîÑ –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ –ø–æ–¥—Ö–æ–¥—ã

### –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ 1: CDC (Change Data Capture)

**–ò–¥–µ—è:**
–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –º–µ—Ö–∞–Ω–∏–∑–º CDC PostgreSQL –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π

**–ü–ª—é—Å—ã:**
- Real-time –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π
- –ù–µ —Ç—Ä–µ–±—É–µ—Ç `updated_at` –ø–æ–ª–µ–π
- –í—ã—Å–æ–∫–∞—è —Ç–æ—á–Ω–æ—Å—Ç—å

**–ú–∏–Ω—É—Å—ã:**
- –°–ª–æ–∂–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ (Debezium, Kafka –∏ —Ç.–¥.)
- –¢—Ä–µ–±—É–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—É—é –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—É
- –ò–∑–±—ã—Ç–æ—á–Ω–æ –¥–ª—è —Ç–µ–∫—É—â–µ–≥–æ –º–∞—Å—à—Ç–∞–±–∞

**–†–µ—à–µ–Ω–∏–µ:** –û—Ç–ª–æ–∂–∏—Ç—å –¥–æ –º–∞—Å—à—Ç–∞–±–∞ 1000+ –∫–∞–±–∏–Ω–µ—Ç–æ–≤

---

### –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ 2: Trigger-based –∏–Ω–¥–µ–∫—Å–∞—Ü–∏—è

**–ò–¥–µ—è:**
–°–æ–∑–¥–∞—Ç—å triggers –≤ –æ—Å–Ω–æ–≤–Ω–æ–π –ë–î –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö

**–ü–ª—é—Å—ã:**
- Real-time –∏–Ω–¥–µ–∫—Å–∞—Ü–∏—è
- –ù–µ —Ç—Ä–µ–±—É–µ—Ç –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏—Ö –∑–∞–¥–∞—á

**–ú–∏–Ω—É—Å—ã:**
- –ù–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ –æ—Å–Ω–æ–≤–Ω—É—é –ë–î
- –°–ª–æ–∂–Ω–æ—Å—Ç—å –æ—Ç–ª–∞–¥–∫–∏
- Coupling –º–µ–∂–¥—É –æ—Å–Ω–æ–≤–Ω–æ–π –ë–î –∏ RAG

**–†–µ—à–µ–Ω–∏–µ:** –ù–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è —Ç–µ–∫—É—â–µ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

---

### –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ 3: Event-driven –∏–Ω–¥–µ–∫—Å–∞—Ü–∏—è

**–ò–¥–µ—è:**
WB sync task —Ç—Ä–∏–≥–≥–µ—Ä–∏—Ç RAG –∏–Ω–¥–µ–∫—Å–∞—Ü–∏—é –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è

**–ü–ª—é—Å—ã:**
- Near real-time –∏–Ω–¥–µ–∫—Å–∞—Ü–∏—è (–ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ WB sync)
- –ì–æ—Ç–æ–≤–∞—è –¥–µ–ª—å—Ç–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π (–Ω–µ –Ω—É–∂–Ω–æ –∑–∞–ø—Ä–∞—à–∏–≤–∞—Ç—å –ø–æ timestamp)
- –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö (RAG –≤—Å–µ–≥–¥–∞ –∞–∫—Ç—É–∞–ª–µ–Ω)
- –ü—Ä–æ—Å—Ç–æ—Ç–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã (–Ω–µ—Ç –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ–≥–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è)
- **–õ–æ–≥–∏–∫–∞:** –ï—Å–ª–∏ WB sync —Å–±–æ–∏—Ç ‚Üí –∏–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞—Ç—å –Ω–µ—á–µ–≥–æ

**–ú–∏–Ω—É—Å—ã:**
- –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç WB sync (–Ω–æ —ç—Ç–æ –Ω–µ –º–∏–Ω—É—Å, –∞ –ª–æ–≥–∏—á–Ω–∞—è —Å–≤—è–∑—å)
- –ù—É–∂–Ω–æ –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å WB sync task –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ –¥–µ–ª—å—Ç—ã

**–†–µ—à–µ–Ω–∏–µ:** ‚úÖ **–í–´–ë–†–ê–ù** - —ç—Ç–æ –ø–æ–¥—Ö–æ–¥ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –ø—Ä–æ–µ–∫—Ç–µ

---

## ‚úÖ –ß–µ–∫–ª–∏—Å—Ç –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ –∫ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ

### –ü–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º —Ä–∞–±–æ—Ç—ã:

- [ ] –ò–∑—É—á–µ–Ω–∞ —Ç–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏
- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω—ã —Ç–∞–±–ª–∏—Ü—ã –æ—Å–Ω–æ–≤–Ω–æ–π –ë–î –Ω–∞ –Ω–∞–ª–∏—á–∏–µ `updated_at`
- [ ] –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∞ —Å—Ç—Ä–∞—Ç–µ–≥–∏—è –¥–ª—è —Ç–∞–±–ª–∏—Ü –±–µ–∑ `updated_at`
- [ ] –°–æ–≥–ª–∞—Å–æ–≤–∞–Ω –ø–ª–∞–Ω —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ —Å –∫–æ–º–∞–Ω–¥–æ–π
- [ ] –ü–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω–∞ —Ç–µ—Å—Ç–æ–≤–∞—è —Å—Ä–µ–¥–∞
- [ ] –°–æ–∑–¥–∞–Ω—ã –∑–∞–¥–∞—á–∏ –≤ —Ç—Ä–µ–∫–µ—Ä–µ (Jira, GitHub Issues –∏ —Ç.–¥.)

### –ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è:

- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –∏–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞–ª—å–Ω–∞—è –∏–Ω–¥–µ–∫—Å–∞—Ü–∏—è
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –ø–æ–ª–Ω–∞—è –ø–µ—Ä–µ–∏–Ω–¥–µ–∫—Å–∞—Ü–∏—è —Å –æ—á–∏—Å—Ç–∫–æ–π
- [ ] –û–±–Ω–æ–≤–ª–µ–Ω Celery Beat schedule
- [ ] –ù–∞–ø–∏—Å–∞–Ω—ã —Ç–µ—Å—Ç—ã (unit, integration, e2e)
- [ ] –û–±–Ω–æ–≤–ª–µ–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- [ ] –ü—Ä–æ–≤–µ–¥–µ–Ω–æ –Ω–∞–≥—Ä—É–∑–æ—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- [ ] –î–µ–ø–ª–æ–π –≤ production
- [ ] –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –º–µ—Ç—Ä–∏–∫ (–ø–µ—Ä–≤–∞—è –Ω–µ–¥–µ–ª—è)
- [ ] –°–æ–±—Ä–∞–Ω—ã –¥–∞–Ω–Ω—ã–µ –ø–æ —ç–∫–æ–Ω–æ–º–∏–∏ API –∏ —É—Å–∫–æ—Ä–µ–Ω–∏—é

---

## üìö –°–≤—è–∑–∞–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã

- `RAG_INDEXING_SETUP.md` - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ç–µ–∫—É—â–µ–π –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏
- `RAG_FIXES_2025-12-16.md` - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤ –≤–µ–∫—Ç–æ—Ä–Ω–æ–º –ø–æ–∏—Å–∫–µ
- `RESILIENCE_IMPROVEMENTS.md` - –£–ª—É—á—à–µ–Ω–∏—è —É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç–∏
- `QUICK_REINDEX.md` - –ë—ã—Å—Ç—Ä–∞—è –ø–µ—Ä–µ–∏–Ω–¥–µ–∫—Å–∞—Ü–∏—è

---

**–í–µ—Ä—Å–∏—è:** 1.0.0
**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 2025-12-16
**–ê–≤—Ç–æ—Ä:** Claude Sonnet 4.5
**–°—Ç–∞—Ç—É—Å:** üìã –ü–ª–∞–Ω –≥–æ—Ç–æ–≤ –∫ –æ–±—Å—É–∂–¥–µ–Ω–∏—é –∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ
