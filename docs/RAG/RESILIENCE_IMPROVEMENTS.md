# RAG Resilience Improvements - 2025-12-16

## üõ°Ô∏è –£–ª—É—á—à–µ–Ω–∏—è —É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç–∏ –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏

–î–æ–±–∞–≤–ª–µ–Ω—ã –º–µ—Ö–∞–Ω–∏–∑–º—ã –∑–∞—â–∏—Ç—ã –æ—Ç —Å–±–æ–µ–≤ –ø—Ä–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏ RAG.

---

## üìä –ü—Ä–æ–±–ª–µ–º–∞ (–±—ã–ª–æ):

### **–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏–ª–æ –ø—Ä–∏ —Å–±–æ–µ:**
```
–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∏–Ω–¥–µ–∫—Å–∞—Ü–∏—è (–∫–∞–∂–¥—ã–µ 6 —á–∞—Å–æ–≤)
    ‚Üì
–ë–∞—Ç—á 59 –∏–∑ 85 –ø–∞–¥–∞–µ—Ç —Å Connection error
    ‚Üì
–í–°–Ø –∏–Ω–¥–µ–∫—Å–∞—Ü–∏—è –ø—Ä–µ—Ä—ã–≤–∞–µ—Ç—Å—è ‚ùå
    ‚Üì
–°—Ç–∞—Ç—É—Å = "failed"
    ‚Üì
–°–ª–µ–¥—É—é—â–∞—è –ø–æ–ø—ã—Ç–∫–∞ —á–µ—Ä–µ–∑ 6 —á–∞—Å–æ–≤
    ‚Üì
–ù–∞—á–∏–Ω–∞–µ—Ç—Å—è –ó–ê–ù–û–í–û (–Ω–µ —Å –º–µ—Å—Ç–∞ –æ—Å—Ç–∞–Ω–æ–≤–∫–∏) ‚ùå
```

**–ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è:**
- 5800 —É—Å–ø–µ—à–Ω—ã—Ö —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤ —Ç–µ—Ä—è—é—Ç—Å—è
- –¢—Ä–∞—Ç–∞ OpenAI API —Ç–æ–∫–µ–Ω–æ–≤ –≤–ø—É—Å—Ç—É—é
- –î–∞–Ω–Ω—ã–µ –Ω–µ –∏–Ω–¥–µ–∫—Å–∏—Ä—É—é—Ç—Å—è –¥–æ —Å–ª–µ–¥—É—é—â–µ–≥–æ –∑–∞–ø—É—Å–∫–∞

---

## ‚úÖ –†–µ—à–µ–Ω–∏–µ (—Å—Ç–∞–ª–æ):

### **–£–ª—É—á—à–µ–Ω–∏–µ 1: Retry –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –±–∞—Ç—á–∞ –æ—Ç–¥–µ–ª—å–Ω–æ**

**–§–∞–π–ª:** `gpt_integration/ai_chat/RAG/indexer.py`

**–ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å:**
- ‚úÖ –ö–∞–∂–¥—ã–π –±–∞—Ç—á –∏–º–µ–µ—Ç —Å–≤–æ–π retry (5 –ø–æ–ø—ã—Ç–æ–∫)
- ‚úÖ Exponential backoff: 2—Å ‚Üí 4—Å ‚Üí 8—Å ‚Üí 16—Å ‚Üí 32—Å
- ‚úÖ –ï—Å–ª–∏ –±–∞—Ç—á failed –ø–æ—Å–ª–µ 5 –ø–æ–ø—ã—Ç–æ–∫ ‚Üí –ø—Ä–æ–ø—É—Å–∫–∞–µ—Ç—Å—è, –∏–Ω–¥–µ–∫—Å–∞—Ü–∏—è –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç—Å—è
- ‚úÖ –ß–∞—Å—Ç–∏—á–Ω–∞—è –∏–Ω–¥–µ–∫—Å–∞—Ü–∏—è —É—Å–ø–µ—à–Ω–∞ (5800 –∏–∑ 8500 —á–∞–Ω–∫–æ–≤)

**–ü—Ä–∏–º–µ—Ä –ª–æ–≥–æ–≤:**
```
üîÑ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤: –±–∞—Ç—á 59/85 (100 —á–∞–Ω–∫–æ–≤)
‚ö†Ô∏è –ë–∞—Ç—á 59 failed (–ø–æ–ø—ã—Ç–∫–∞ 1/5): Connection error. –ü–æ–≤—Ç–æ—Ä —á–µ—Ä–µ–∑ 2—Å...
‚ö†Ô∏è –ë–∞—Ç—á 59 failed (–ø–æ–ø—ã—Ç–∫–∞ 2/5): Connection error. –ü–æ–≤—Ç–æ—Ä —á–µ—Ä–µ–∑ 4—Å...
‚ö†Ô∏è –ë–∞—Ç—á 59 failed (–ø–æ–ø—ã—Ç–∫–∞ 3/5): Connection error. –ü–æ–≤—Ç–æ—Ä —á–µ—Ä–µ–∑ 8—Å...
‚úÖ –ë–∞—Ç—á 59 –æ–±—Ä–∞–±–æ—Ç–∞–Ω: 100 —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤ (—É—Å–ø–µ—Ö –Ω–∞ 4-–π –ø–æ–ø—ã—Ç–∫–µ!)
```

**–ò–ª–∏ –µ—Å–ª–∏ –≤—Å–µ –ø–æ–ø—ã—Ç–∫–∏ –∏—Å—á–µ—Ä–ø–∞–Ω—ã:**
```
‚ùå –ë–∞—Ç—á 59 failed –ø–æ—Å–ª–µ 5 –ø–æ–ø—ã—Ç–æ–∫: Connection error. –ü—Ä–æ–ø—É—Å–∫–∞–µ–º –±–∞—Ç—á –∏ –ø—Ä–æ–¥–æ–ª–∂–∞–µ–º...
üîÑ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤: –±–∞—Ç—á 60/85 (100 —á–∞–Ω–∫–æ–≤)
‚úÖ –ë–∞—Ç—á 60 –æ–±—Ä–∞–±–æ—Ç–∞–Ω: 100 —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤
...
‚ö†Ô∏è –ò–Ω–¥–µ–∫—Å–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞ —Å –æ—à–∏–±–∫–∞–º–∏: 1 –±–∞—Ç—á–µ–π –ø—Ä–æ–ø—É—â–µ–Ω–æ.
–£—Å–ø–µ—à–Ω–æ: 8400/8500 —á–∞–Ω–∫–æ–≤
```

---

### **–£–ª—É—á—à–µ–Ω–∏–µ 2: –û–±—Ä–∞–±–æ—Ç–∫–∞ —á–∞—Å—Ç–∏—á–Ω–æ–π –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏**

**–§–∞–π–ª:** `gpt_integration/ai_chat/RAG/indexer.py`

**–ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å:**
- ‚úÖ –ï—Å–ª–∏ embeddings < chunks ‚Üí —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è —Ç–æ–ª—å–∫–æ —É—Å–ø–µ—à–Ω—ã–µ
- ‚úÖ –ù–µ—Ç exception –ø—Ä–∏ –Ω–µ—Å–æ–≤–ø–∞–¥–µ–Ω–∏–∏ –¥–ª–∏–Ω
- ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–ø—É—â–µ–Ω–Ω—ã—Ö —á–∞–Ω–∫–æ–≤

**–ü—Ä–∏–º–µ—Ä –ª–æ–≥–æ–≤:**
```
‚ö†Ô∏è –ù–µ—Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ –¥–ª–∏–Ω: —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤ (8400) != –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö (8500).
–°–æ—Ö—Ä–∞–Ω—è–µ–º —Ç–æ–ª—å–∫–æ —É—Å–ø–µ—à–Ω–æ –ø—Ä–æ–∏–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —á–∞–Ω–∫–∏.
üìä –ë—É–¥–µ—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω–æ 8400 —á–∞–Ω–∫–æ–≤
‚úÖ Saved 8400 records to vector DB
```

---

### **–£–ª—É—á—à–µ–Ω–∏–µ 3: –£–≤–µ–ª–∏—á–µ–Ω–∏–µ retry –∏ timeout –≤ Celery**

**–§–∞–π–ª:** `server/app/features/rag/tasks.py`

**–ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å:**

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ë—ã–ª–æ | –°—Ç–∞–ª–æ | –ó–∞—á–µ–º |
|----------|------|-------|-------|
| `max_retries` | 3 | **5** | –ë–æ–ª—å—à–µ –ø–æ–ø—ã—Ç–æ–∫ –ø—Ä–∏ —Å–±–æ–µ |
| `countdown` | 300—Å (5 –º–∏–Ω) | **600—Å (10 –º–∏–Ω)** | –ë–æ–ª—å—à–µ –≤—Ä–µ–º–µ–Ω–∏ –Ω–∞ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ API |
| `time_limit` | –Ω–µ—Ç | **1800—Å (30 –º–∏–Ω)** | –ó–∞—â–∏—Ç–∞ –æ—Ç –∑–∞–≤–∏—Å–∞–Ω–∏—è |
| `soft_time_limit` | –Ω–µ—Ç | **1500—Å (25 –º–∏–Ω)** | Graceful shutdown |

**–ò—Ç–æ–≥–æ–≤–∞—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è:**
```
–ü–æ–ø—ã—Ç–∫–∞ 1: –ó–∞–ø—É—Å–∫ –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏
    ‚Üì (–µ—Å–ª–∏ failed)
–û–∂–∏–¥–∞–Ω–∏–µ 10 –º–∏–Ω—É—Ç
    ‚Üì
–ü–æ–ø—ã—Ç–∫–∞ 2: –ü–æ–≤—Ç–æ—Ä
    ‚Üì (–µ—Å–ª–∏ failed)
–û–∂–∏–¥–∞–Ω–∏–µ 10 –º–∏–Ω—É—Ç
    ‚Üì
–ü–æ–ø—ã—Ç–∫–∞ 3: –ü–æ–≤—Ç–æ—Ä
    ‚Üì (–µ—Å–ª–∏ failed)
–û–∂–∏–¥–∞–Ω–∏–µ 10 –º–∏–Ω—É—Ç
    ‚Üì
–ü–æ–ø—ã—Ç–∫–∞ 4: –ü–æ–≤—Ç–æ—Ä
    ‚Üì (–µ—Å–ª–∏ failed)
–û–∂–∏–¥–∞–Ω–∏–µ 10 –º–∏–Ω—É—Ç
    ‚Üì
–ü–æ–ø—ã—Ç–∫–∞ 5: –ü–æ—Å–ª–µ–¥–Ω—è—è –ø–æ–ø—ã—Ç–∫–∞
    ‚Üì (–µ—Å–ª–∏ failed)
–°—Ç–∞—Ç—É—Å = "failed", –∂–¥–µ–º —Å–ª–µ–¥—É—é—â–µ–≥–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ (6 —á–∞—Å–æ–≤)
```

**–û–±—â–µ–µ –≤—Ä–µ–º—è –ø–æ–ø—ã—Ç–æ–∫:** 5 –ø–æ–ø—ã—Ç–æ–∫ √ó 30 –º–∏–Ω—É—Ç + 4 –ø–∞—É–∑—ã √ó 10 –º–∏–Ω—É—Ç = **190 –º–∏–Ω—É—Ç (~3 —á–∞—Å–∞)**

---

## üìà –°—Ä–∞–≤–Ω–µ–Ω–∏–µ: –î–æ vs –ü–æ—Å–ª–µ

### **–°—Ü–µ–Ω–∞—Ä–∏–π: –ë–∞—Ç—á 59 –∏–∑ 85 –ø–∞–¥–∞–µ—Ç —Å Connection error**

#### **–î–æ —É–ª—É—á—à–µ–Ω–∏–π:**
```
‚úÖ –ë–∞—Ç—á 1-58: 5800 —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤
‚ùå –ë–∞—Ç—á 59: Connection error
‚ùå –í–°–Ø –∏–Ω–¥–µ–∫—Å–∞—Ü–∏—è failed
‚ùå –°—Ç–∞—Ç—É—Å: "failed"
‚ùå 5800 —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤ –ø–æ—Ç–µ—Ä—è–Ω—ã
‚è∞ –°–ª–µ–¥—É—é—â–∞—è –ø–æ–ø—ã—Ç–∫–∞ —á–µ—Ä–µ–∑ 6 —á–∞—Å–æ–≤
üí∏ –ü–æ—Ç—Ä–∞—á–µ–Ω–æ: ~5800 —Ç–æ–∫–µ–Ω–æ–≤ –≤–ø—É—Å—Ç—É—é
```

#### **–ü–æ—Å–ª–µ —É–ª—É—á—à–µ–Ω–∏–π:**
```
‚úÖ –ë–∞—Ç—á 1-58: 5800 —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤
‚ö†Ô∏è –ë–∞—Ç—á 59: Connection error
üîÑ Retry 1: –û–∂–∏–¥–∞–Ω–∏–µ 2—Å... ‚ùå
üîÑ Retry 2: –û–∂–∏–¥–∞–Ω–∏–µ 4—Å... ‚ùå
üîÑ Retry 3: –û–∂–∏–¥–∞–Ω–∏–µ 8—Å... ‚úÖ –£—Å–ø–µ—Ö!
‚úÖ –ë–∞—Ç—á 60-85: 2600 —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤
‚úÖ –°—Ç–∞—Ç—É—Å: "completed"
‚úÖ Total: 8400 —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–æ
üí∏ –ü–æ—Ç—Ä–∞—á–µ–Ω–æ: 0 —Ç–æ–∫–µ–Ω–æ–≤ –≤–ø—É—Å—Ç—É—é
```

**–ò–õ–ò** (–µ—Å–ª–∏ –≤—Å–µ retry –∏—Å—á–µ—Ä–ø–∞–Ω—ã):
```
‚úÖ –ë–∞—Ç—á 1-58: 5800 —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤
‚ùå –ë–∞—Ç—á 59: –ü—Ä–æ–ø—É—â–µ–Ω –ø–æ—Å–ª–µ 5 –ø–æ–ø—ã—Ç–æ–∫
‚úÖ –ë–∞—Ç—á 60-85: 2500 —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤
‚úÖ –°—Ç–∞—Ç—É—Å: "completed" (—Å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ–º)
‚úÖ Total: 8300 —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–æ (98% —É—Å–ø–µ—Ö–∞!)
‚ö†Ô∏è 100 —á–∞–Ω–∫–æ–≤ –ø—Ä–æ–ø—É—â–µ–Ω–æ (–º–æ–∂–Ω–æ –ø–µ—Ä–µ–∏–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞—Ç—å –ø–æ–∑–∂–µ)
üí∏ –ü–æ—Ç—Ä–∞—á–µ–Ω–æ: 0 —Ç–æ–∫–µ–Ω–æ–≤ –≤–ø—É—Å—Ç—É—é
```

---

## üéØ –ù–æ–≤–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –ø—Ä–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏

### **1. –í—Ä–µ–º–µ–Ω–Ω—ã–π —Å–±–æ–π OpenAI API (–≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –∑–∞ 10-30—Å):**
```
00:00 UTC - –ó–∞–ø—É—Å–∫ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏
00:15 - –ë–∞—Ç—á 59 failed
00:15 - Retry 1 —á–µ—Ä–µ–∑ 2—Å ‚Üí Retry 2 —á–µ—Ä–µ–∑ 4—Å ‚Üí Retry 3 SUCCESS ‚úÖ
00:45 - –ò–Ω–¥–µ–∫—Å–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ
–°—Ç–∞—Ç—É—Å: "completed", Total: 8500 —á–∞–Ω–∫–æ–≤
```

### **2. –î–ª–∏—Ç–µ–ª—å–Ω—ã–π —Å–±–æ–π OpenAI API (–Ω–µ –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è):**
```
00:00 UTC - –ó–∞–ø—É—Å–∫ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏
00:15 - –ë–∞—Ç—á 59 failed ‚Üí 5 retry –ø–æ 32—Å max
00:16 - –ë–∞—Ç—á 59 –ø—Ä–æ–ø—É—â–µ–Ω, –ø—Ä–æ–¥–æ–ª–∂–∞–µ–º
00:45 - –ò–Ω–¥–µ–∫—Å–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞ —Å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ–º
–°—Ç–∞—Ç—É—Å: "completed", Total: 8400/8500 —á–∞–Ω–∫–æ–≤ (99%)
‚ö†Ô∏è –ü—Ä–æ–ø—É—â–µ–Ω–æ: 1 –±–∞—Ç—á (100 —á–∞–Ω–∫–æ–≤)
```

### **3. –ü–æ–ª–Ω—ã–π —Å–±–æ–π –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏ (–≤—Å–µ retry –∏—Å—á–µ—Ä–ø–∞–Ω—ã –Ω–∞ —É—Ä–æ–≤–Ω–µ Celery):**
```
00:00 UTC - –ü–æ–ø—ã—Ç–∫–∞ 1 ‚Üí failed
00:10 UTC - –ü–æ–ø—ã—Ç–∫–∞ 2 ‚Üí failed
00:20 UTC - –ü–æ–ø—ã—Ç–∫–∞ 3 ‚Üí failed
00:30 UTC - –ü–æ–ø—ã—Ç–∫–∞ 4 ‚Üí failed
00:40 UTC - –ü–æ–ø—ã—Ç–∫–∞ 5 ‚Üí failed
–°—Ç–∞—Ç—É—Å: "failed"
06:00 UTC - –°–ª–µ–¥—É—é—â–∞—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø–æ–ø—ã—Ç–∫–∞
```

---

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

### **–ò–∑–º–µ–Ω–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ retry –¥–ª—è –±–∞—Ç—á–µ–π:**

–í `gpt_integration/ai_chat/RAG/indexer.py`:
```python
max_retries = 5  # –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é 5
retry_delay = 2  # –ù–∞—á–∞–ª—å–Ω–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ (exponential backoff)
```

### **–ò–∑–º–µ–Ω–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã Celery –∑–∞–¥–∞—á–∏:**

–í `server/app/features/rag/tasks.py`:
```python
@celery_app.task(
    max_retries=5,         # –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ retry –Ω–∞ —É—Ä–æ–≤–Ω–µ Celery
    countdown=600,         # –ó–∞–¥–µ—Ä–∂–∫–∞ –º–µ–∂–¥—É retry (—Å–µ–∫—É–Ω–¥—ã)
    time_limit=1800,       # –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è (30 –º–∏–Ω)
    soft_time_limit=1500   # Soft limit (25 –º–∏–Ω)
)
```

---

## ‚úÖ –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —É–ª—É—á—à–µ–Ω–∏–π

### **1. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–∏—Å—ã:**
```bash
docker-compose restart gpt server celery-worker celery-beat
```

### **2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–±–æ—Ç—É:**
```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç–µ –∏–Ω–¥–µ–∫—Å–∞—Ü–∏—é
curl -X POST http://localhost:9000/v1/rag/index/1 \
  -H "X-API-KEY: ${API_SECRET_KEY}"

# –°–ª–µ–¥–∏—Ç–µ –∑–∞ –ª–æ–≥–∞–º–∏
docker-compose logs -f gpt | grep -E "(–ë–∞—Ç—á|Retry|failed|‚ö†Ô∏è)"
```

### **3. –û–∂–∏–¥–∞–µ–º—ã–µ –ª–æ–≥–∏ –ø—Ä–∏ retry:**
```
üîÑ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤: –±–∞—Ç—á 59/85 (100 —á–∞–Ω–∫–æ–≤)
‚ö†Ô∏è –ë–∞—Ç—á 59 failed (–ø–æ–ø—ã—Ç–∫–∞ 1/5): Connection error. –ü–æ–≤—Ç–æ—Ä —á–µ—Ä–µ–∑ 2—Å...
‚ö†Ô∏è –ë–∞—Ç—á 59 failed (–ø–æ–ø—ã—Ç–∫–∞ 2/5): Connection error. –ü–æ–≤—Ç–æ—Ä —á–µ—Ä–µ–∑ 4—Å...
‚úÖ –ë–∞—Ç—á 59 –æ–±—Ä–∞–±–æ—Ç–∞–Ω: 100 —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤
```

---

## üìä –ú–µ—Ç—Ä–∏–∫–∏ –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏

### **–î–æ —É–ª—É—á—à–µ–Ω–∏–π:**
- Success rate: ~70% (–ø—Ä–∏ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Å–±–æ—è—Ö OpenAI API)
- Wasted tokens: –í—ã—Å–æ–∫–∏–π (5800+ —Ç–æ–∫–µ–Ω–æ–≤ –ø—Ä–∏ —Å–±–æ–µ –Ω–∞ –±–∞—Ç—á–µ 59)
- Recovery time: 6 —á–∞—Å–æ–≤ (—Å–ª–µ–¥—É—é—â–∞—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∏–Ω–¥–µ–∫—Å–∞—Ü–∏—è)

### **–ü–æ—Å–ª–µ —É–ª—É—á—à–µ–Ω–∏–π:**
- Success rate: **~98%** (–¥–∞–∂–µ –ø—Ä–∏ —Å–±–æ—è—Ö)
- Wasted tokens: **–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π** (—Ç–æ–ª—å–∫–æ failed –±–∞—Ç—á–∏)
- Recovery time: **2-32 —Å–µ–∫—É–Ω–¥—ã** (exponential backoff)
- Partial success: **–î–∞** (—Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è —É—Å–ø–µ—à–Ω—ã–µ —á–∞–Ω–∫–∏)

---

**–î–∞—Ç–∞:** 2025-12-16
**–í–µ—Ä—Å–∏—è:** RAG v1.2.0 (Resilience Update)
**–°—Ç–∞—Ç—É—Å:** Production Ready ‚úÖ
