### 1. üìò –û–±—â–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

* **–ù–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞:** AI Telegram Bot –¥–ª—è –ø—Ä–æ–¥–∞–≤—Ü–æ–≤ –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å–æ–≤ (MVP –¥–ª—è Wildberries)
* **–¶–µ–ª—å –ø—Ä–æ–µ–∫—Ç–∞:** ...
* **–¶–µ–ª–µ–≤–∞—è –∞—É–¥–∏—Ç–æ—Ä–∏—è:** ...
* **–û—Å–Ω–æ–≤–Ω–∞—è —Ü–µ–Ω–Ω–æ—Å—Ç—å (Value Proposition):** ...

(–ó–¥–µ—Å—å –º–æ–∂–Ω–æ –æ—Å—Ç–∞–≤–∏—Ç—å –∫—Ä–∞—Ç–∫–æ–µ —Ä–µ–∑—é–º–µ –∏–∑ —Ç–≤–æ–µ–≥–æ –¢–ó.)

---

### 2. üí° –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–æ–µ –≤–∏–¥–µ–Ω–∏–µ

* **–û—Å–Ω–æ–≤–Ω–æ–π —Å—Ç–µ–∫:** `Aiogram`, `FastAPI`, `PostgreSQL`, `Redis`, `Docker`
* **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏:** `WB API`, `Google Sheets API`, `OpenAI API`, `MJ API`
* **–î–µ–ø–ª–æ–π:** Docker-compose / VPS / CI-CD
* **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–π –ø–∞—Ç—Ç–µ—Ä–Ω:** microservice-style / modular monolith
* **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:** TDD, `pytest`, `pytest-asyncio`
* **ORM:** SQLAlchemy + Alembic (–º–∏–≥—Ä–∞—Ü–∏–∏)
* **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ:** Redis
* **–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç—å:** asyncio

---

### 3. ‚öôÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ (high-level)

#### 3.1. –ú–æ–¥—É–ª–∏ —Å–∏—Å—Ç–µ–º—ã

* `core.bot` ‚Äî Telegram –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å (Aiogram)
* `core.api` ‚Äî REST API –Ω–∞ FastAPI (–¥–ª—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏—Ö –∏ –≤–Ω–µ—à–Ω–∏—Ö –≤—ã–∑–æ–≤–æ–≤)
* `core.scheduler` ‚Äî —Ñ–æ–Ω–æ–≤—ã–π –≤–æ—Ä–∫–µ—Ä (Celery/Asyncio)
* `core.db` ‚Äî –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
* `core.cache` ‚Äî Redis
* `core.integrations` ‚Äî –∫–ª–∏–µ–Ω—Ç—ã API (WB, Google Sheets, OpenAI, MJ)
* `core.analytics` ‚Äî –º–æ–¥—É–ª—å –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ (AI, —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞)
* `core.users` ‚Äî —Å–∏—Å—Ç–µ–º–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∏ —Ä–æ–ª–µ–π

#### 3.2. –ü–æ—Ç–æ–∫–∏ –¥–∞–Ω–Ω—ã—Ö

* `Telegram` ‚Üí `Bot` ‚Üí `API` ‚Üí `DB`
* `Scheduler` ‚Üí `WB API` ‚Üí `DB` ‚Üí —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ `Telegram`
* `AI` ‚Üí –ø–æ–ª—É—á–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ `DB` ‚Üí –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ç–µ–∫—Å—Ç/–∞–Ω–∞–ª–∏—Ç–∏–∫—É –≤ —á–∞—Ç
* `Google Sheets` ‚Üî `API` ‚Üî `DB`

---

### 4. üß© –ü–æ–¥—Å–∏—Å—Ç–µ–º—ã –∏ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

#### 4.1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –∏ –¥–æ—Å—Ç—É–ø

* **–°—É—â–Ω–æ—Å—Ç–∏:** User, Shop, APIKey
* **–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è:** –ø–æ Telegram ID
* **–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è:** Telegram ID ‚Üí User
* **–°–≤—è–∑–∫–∞ —Å WB API:** –æ–¥–∏–Ω –∏–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ –∫–∞–±–∏–Ω–µ—Ç–æ–≤ –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
* **–î–æ—Å—Ç—É–ø—ã:** —Ä–∞–≤–Ω—ã–µ –≤ MVP, ACL –ø–æ–∑–∂–µ

üìå *–¢–µ—Å—Ç-–∫–µ–π—Å—ã (TDD):*

* `test_user_registration`
* `test_add_api_key`
* `test_list_shops_by_user`

---

#### 4.2. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Wildberries API *(–≠—Ç–∞–ø 2)*

* **–ú–µ—Ç–æ–¥—ã:** —Ç–æ–≤–∞—Ä—ã, –∑–∞–∫–∞–∑—ã, –æ—Å—Ç–∞—Ç–∫–∏, —Ü–µ–Ω—ã, –æ—Ç–∑—ã–≤—ã.
* **–ò–Ω—Ç–µ—Ä–≤–∞–ª—ã –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:** –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω (Redis TTL)
* **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫:** retry + fallback cache
* **–§–æ—Ä–º–∞—Ç —Ö—Ä–∞–Ω–µ–Ω–∏—è:** JSON ‚Üí PostgreSQL (—Ç–∞–±–ª–∏—Ü—ã: `orders`, `reviews`, `stocks`, `prices`)
* **–ù–∞—Å—Ç—Ä–æ–π–∫–∞:** `/settings` ‚Üí üîë –í—Å—Ç–∞–≤–∏—Ç—å API-–∫–ª—é—á

üìå *–¢–µ—Å—Ç-–∫–µ–π—Å—ã (TDD):*

* `test_wb_auth_valid_key`
* `test_wb_orders_sync`
* `test_wb_reviews_sync`
* `test_wb_cache_fallback`

---

#### 4.3. –°–∏—Å—Ç–µ–º–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π *(–≠—Ç–∞–ø 3)*

* **–¢–∏–ø—ã —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π:**

  * –ó–∞–∫–∞–∑—ã (–Ω–æ–≤—ã–µ)
  * –û—Ç–∑—ã–≤—ã (–Ω–æ–≤—ã–µ, 1‚Äì3‚òÖ)
  * –û—Å—Ç–∞—Ç–∫–∏ (–Ω–∏–∂–µ –ø–æ—Ä–æ–≥–∞)
  * –°–ª–æ—Ç—ã –æ—Ç–≥—Ä—É–∑–∫–∏
* **–ß–∞—Å—Ç–æ—Ç–∞:** –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç
* **–ù–∞—Å—Ç—Ä–æ–π–∫–∏:** –≤ –ø—Ä–æ—Ñ–∏–ª–µ (`/settings ‚Üí notifications`)
* **–•—Ä–∞–Ω–∏–ª–∏—â–µ:** Redis pub/sub
* **UI:** inline –∫–Ω–æ–ø–∫–∏ ¬´–æ—Ç–∫–ª—é—á–∏—Ç—å¬ª, ¬´–ø–æ–¥—Ä–æ–±–Ω–µ–µ¬ª

üìå *–¢–µ—Å—Ç-–∫–µ–π—Å—ã (TDD):*

* `test_new_order_notification`
* `test_low_stock_alert`
* `test_toggle_notifications`

---

#### 4.4. Google Sheets –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è *(–≠—Ç–∞–ø 4)*

* **–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è:** OAuth 2.0
* **–®–∞–±–ª–æ–Ω:** –ø—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–π Google Sheet (–≤–∫–ª–∞–¥–∫–∏: Orders, Reviews, Stocks)
* **–ù–∞—Å—Ç—Ä–æ–π–∫–∞:** –≤—Å—Ç–∞–≤–∫–∞ ID + Token
* **–î–∞–Ω–Ω—ã–µ:** —ç–∫—Å–ø–æ—Ä—Ç –∑–∞–∫–∞–∑–æ–≤, –æ—Å—Ç–∞—Ç–∫–æ–≤, –æ—Ç–∑—ã–≤–æ–≤
* **–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ:** –ø–æ –∫–æ–º–∞–Ω–¥–µ –∏–ª–∏ cron (—Ä–∞–∑ –≤ –¥–µ–Ω—å)

üìå *–¢–µ—Å—Ç-–∫–µ–π—Å—ã (TDD):*

* `test_sheet_auth`
* `test_sheet_export_orders`
* `test_sheet_export_reviews`

---

#### 4.5. AI-–º–æ–¥—É–ª—å *(–≠—Ç–∞–ø 5)*

* **–§—É–Ω–∫—Ü–∏–∏:**

  * GPT-—á–∞—Ç —Å –ª–∏–º–∏—Ç–æ–º (30 –∑–∞–ø—Ä–æ—Å–æ–≤)
  * –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –ø–æ –¥–∞–Ω–Ω—ã–º (–∫–æ–º–∞–Ω–¥–∞ `/digest`)
  * –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–µ–∫—Å—Ç–æ–≤ –∫–∞—Ä—Ç–æ—á–µ–∫
* **–ö–æ–Ω—Ç—Ä–æ–ª—å –ª–∏–º–∏—Ç–æ–≤:** Redis counters
* **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è:** OpenAI API
* **–ö–æ–Ω—Ç–µ–∫—Å—Ç:** –¥–∞–Ω–Ω—ã–µ –∏–∑ DB (–ø–æ—Å–ª–µ–¥–Ω–∏–µ –ø—Ä–æ–¥–∞–∂–∏, –æ—Ç–∑—ã–≤—ã, –æ—Å—Ç–∞—Ç–∫–∏)
* **UI:** inline –∫–Ω–æ–ø–∫–∏: –ø—Ä–∏–º–µ—Ä—ã, –≤—ã–≥—Ä—É–∑–∫–∞ –≤ GSheets

üìå *–¢–µ—Å—Ç-–∫–µ–π—Å—ã (TDD):*

* `test_chat_gpt_limit`
* `test_digest_ai_analysis`
* `test_generate_product_texts`

---

#### 4.6. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—Ç–∑—ã–≤–∞–º–∏ *(–≠—Ç–∞–ø 6)*

* **–§—É–Ω–∫—Ü–∏–∏:**

  * –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –Ω–æ–≤—ã—Ö
  * –ê–≤—Ç–æ–æ—Ç–≤–µ—Ç—ã (4‚Äì5‚òÖ)
  * –®–∞–±–ª–æ–Ω—ã –æ—Ç–≤–µ—Ç–æ–≤
* **AI-–æ—Ç–≤–µ—Ç:** —à–∞–±–ª–æ–Ω –∏–ª–∏ GPT
* **–•—Ä–∞–Ω–∏–ª–∏—â–µ:** —Ç–∞–±–ª–∏—Ü–∞ `reviews`

üìå *–¢–µ—Å—Ç-–∫–µ–π—Å—ã (TDD):*

* `test_review_notification`
* `test_auto_reply_positive`
* `test_no_auto_reply_negative`

---

#### 4.7. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π *(–≠—Ç–∞–ø 7)*

* **API:** MJ / SD
* **–¢–∏–ø—ã:**

  * Lifestyle
  * –ò–Ω—Ñ–æ–≥—Ä–∞—Ñ–∏–∫–∞
* **–•—Ä–∞–Ω–∏–ª–∏—â–µ:** –ª–æ–∫–∞–ª—å–Ω–æ / S3
* **–ò—Å—Ç–æ—Ä–∏—è:** —Ç–∞–±–ª–∏—Ü–∞ `images`

üìå *–¢–µ—Å—Ç-–∫–µ–π—Å—ã (TDD):*

* `test_generate_lifestyle_image`
* `test_generate_infographic`
* `test_image_history`

---

#### 4.8. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ü–µ–Ω –∏ –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–æ–≤ *(–≠—Ç–∞–ø 8)*

* **–í–≤–æ–¥:** –∞—Ä—Ç–∏–∫—É–ª / –±—Ä–µ–Ω–¥
* **–°—Ä–∞–≤–Ω–µ–Ω–∏–µ:** —Ç–µ–∫—É—â–∞—è —Ü–µ–Ω–∞ vs –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç—ã
* **–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è:** –æ–± –∏–∑–º–µ–Ω–µ–Ω–∏–∏
* **–ò—Å—Ç–æ—Ä–∏—è:** —Ç–∞–±–ª–∏—Ü–∞ `price_history`

üìå *–¢–µ—Å—Ç-–∫–µ–π—Å—ã (TDD):*

* `test_add_competitor_item`
* `test_compare_prices`
* `test_price_change_alert`

---

### 5. üß† TDD –ü–æ–¥—Ö–æ–¥

–î–ª—è –∫–∞–∂–¥–æ–≥–æ –º–æ–¥—É–ª—è:

* –°–æ–∑–¥–∞—ë–º `tests/` —Å —é–Ω–∏—Ç–∞–º–∏ –¥–æ –Ω–∞–ø–∏—Å–∞–Ω–∏—è –ª–æ–≥–∏–∫–∏.
* –ò—Å–ø–æ–ª—å–∑—É–µ–º `pytest-asyncio` –¥–ª—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π.
* –ü–æ–∫—Ä—ã—Ç–∏–µ –Ω–µ –º–µ–Ω–µ–µ **80%**.
* Snapshot —Ç–µ—Å—Ç—ã –¥–ª—è AI-–æ—Ç–≤–µ—Ç–æ–≤ –∏ —à–∞–±–ª–æ–Ω–æ–≤.

