# –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –∫–∞—Ç–∞–ª–æ–≥–∞ —Ç–æ–≤–∞—Ä–æ–≤ - –ø–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ

## ‚úÖ –°–¢–ê–¢–£–°: –ò–ù–¢–ï–ì–†–ê–¶–ò–Ø –ó–ê–í–ï–†–®–ï–ù–ê

**–î–∞—Ç–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è:** 7 —Ñ–µ–≤—Ä–∞–ª—è 2026  
**–í—Ä–µ–º—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏:** ~2 —á–∞—Å–∞  
**–°—Ç–∞—Ç—É—Å:** –ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é  

> üìã **–ü–æ–¥—Ä–æ–±–Ω—ã–π –æ—Ç—á–µ—Ç –æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏:** [CATALOG_INTEGRATION_COMPLETE.md](CATALOG_INTEGRATION_COMPLETE.md)

---

## –û–ë–ó–û–†

–ö–∞—Ç–∞–ª–æ–≥ —Ç–æ–≤–∞—Ä–æ–≤ –≤ –±–æ—Ç–µ-–¥–æ–Ω–æ—Ä–µ (`fitting_bot`) —Ä–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ **Google Sheets API** –∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –ø–æ–ª–Ω—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–π, —Ç–æ–≤–∞—Ä–æ–≤, –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ –∏ –ø—Ä–∏–º–µ—Ä–∫–∏. –î–∞–Ω–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –æ–ø–∏—Å—ã–≤–∞–µ—Ç –ø–æ—à–∞–≥–æ–≤—É—é –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é —ç—Ç–æ–≥–æ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞ –≤ –æ—Å–Ω–æ–≤–Ω–æ–π WB-–±–æ—Ç –ø—É—Ç–µ–º –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –∏–∑ –¥–æ–Ω–æ—Ä–∞.

**‚úÖ –í–°–ï –ö–û–ú–ü–û–ù–ï–ù–¢–´ –£–°–ü–ï–®–ù–û –ò–ù–¢–ï–ì–†–ò–†–û–í–ê–ù–´**

---

## –ê–†–•–ò–¢–ï–ö–¢–£–†–ê –ö–ê–¢–ê–õ–û–ì–ê –í –î–û–ù–û–†–ï

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–∏—Å—Ç–µ–º—ã:
1. **Google Sheets** - –∏—Å—Ç–æ—á–Ω–∏–∫ –¥–∞–Ω–Ω—ã—Ö (3 –ª–∏—Å—Ç–∞: –ö–∞—Ç–µ–≥–æ—Ä–∏–∏, –¢–æ–≤–∞—Ä—ã, –†–∞–∑–º–µ—Ä—ã)
2. **API —Å–µ—Ä–≤–∏—Å** - FastAPI endpoints (`/api/catalog/*`)
3. **–ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ** - TTL –∫–µ—à —Å –≤—Ä–µ–º–µ–Ω–µ–º –∂–∏–∑–Ω–∏ 5-10 –º–∏–Ω—É—Ç
4. **Bot handlers** - –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ Telegram –∫–æ–º–∞–Ω–¥ (`catalog.py`, `favorites.py`)
5. **Keyboards** - –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã —Å –Ω–∞–≤–∏–≥–∞—Ü–∏–µ–π
6. **API Client** - HTTP –∫–ª–∏–µ–Ω—Ç —Å –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –æ—à–∏–±–æ–∫

### –ü–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö:
```
Google Sheets ‚Üí Sheets Service ‚Üí API Endpoints ‚Üí Bot API Client ‚Üí Handlers ‚Üí Keyboards ‚Üí Telegram UI
```

---

## –°–¢–†–£–ö–¢–£–†–ê –î–ê–ù–ù–´–•

### 1. –õ–∏—Å—Ç "–ö–∞—Ç–µ–≥–æ—Ä–∏–∏"
| –°—Ç–æ–ª–±–µ—Ü | –û–ø–∏—Å–∞–Ω–∏–µ | –ü—Ä–∏–º–µ—Ä |
|---------|----------|---------|
| ID | –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä | 1 |
| –ù–∞–∑–≤–∞–Ω–∏–µ | –ù–∞–∑–≤–∞–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ | –í–µ—Ä—Ö–Ω—è—è –æ–¥–µ–∂–¥–∞ |
| –ü–æ—Ä—è–¥–æ–∫ | –ü–æ—Ä—è–¥–æ–∫ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è | 1 |
| –≠–º–æ–¥–∑–∏ | –≠–º–æ–¥–∑–∏ –¥–ª—è –∫–Ω–æ–ø–∫–∏ | üëî |

### 2. –õ–∏—Å—Ç "–¢–æ–≤–∞—Ä—ã"
| –°—Ç–æ–ª–±–µ—Ü | –û–ø–∏—Å–∞–Ω–∏–µ | –ü—Ä–∏–º–µ—Ä |
|---------|----------|---------|
| ID —Ç–æ–≤–∞—Ä–∞ | –£–Ω–∏–∫–∞–ª—å–Ω—ã–π ID —Ç–æ–≤–∞—Ä–∞ | 12345 |
| –ö–∞—Ç–µ–≥–æ—Ä–∏—è | ID –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ | 1 |
| –ù–∞–∑–≤–∞–Ω–∏–µ | –ù–∞–∑–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞ | –ü–∏–¥–∂–∞–∫ –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π |
| –û–ø–∏—Å–∞–Ω–∏–µ | –ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ | –°—Ç–∏–ª—å–Ω—ã–π –ø–∏–¥–∂–∞–∫... |
| –†–∞–∑–º–µ—Ä—ã | –î–æ—Å—Ç—É–ø–Ω—ã–µ —Ä–∞–∑–º–µ—Ä—ã | S,M,L,XL |
| OZON | ID —Ç–æ–≤–∞—Ä–∞ –Ω–∞ OZON | ozon_123 |
| –°—Å—ã–ª–∫–∞ | –°—Å—ã–ª–∫–∞ –Ω–∞ –º–∞–≥–∞–∑–∏–Ω | https://shop.com/item |
| –§–æ—Ç–æ 1-6 | URLs —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π | Google Drive —Å—Å—ã–ª–∫–∏ |
| –ö–æ–ª–ª–∞–∂ | URL –∫–æ–ª–ª–∞–∂–∞ | Google Drive —Å—Å—ã–ª–∫–∞ |
| –ê–∫—Ç–∏–≤–µ–Ω | –°—Ç–∞—Ç—É—Å —Ç–æ–≤–∞—Ä–∞ | –î–ê/–ù–ï–¢ |

### 3. –õ–∏—Å—Ç "–†–∞–∑–º–µ—Ä—ã"
| –°—Ç–æ–ª–±–µ—Ü | –û–ø–∏—Å–∞–Ω–∏–µ | –ü—Ä–∏–º–µ—Ä |
|---------|----------|---------|
| –ö–∞—Ç–µ–≥–æ—Ä–∏—è | ID —Ç–∞–±–ª–∏—Ü—ã —Ä–∞–∑–º–µ—Ä–æ–≤ | tops |
| –†–∞–∑–º–µ—Ä | –†–∞–∑–º–µ—Ä | M |
| –†–æ—Å—Å–∏–π—Å–∫–∏–π —Ä–∞–∑–º–µ—Ä | –†–æ—Å—Å–∏–π—Å–∫–∏–π —Ä–∞–∑–º–µ—Ä | 46-48 |
| –î–ª–∏–Ω–∞ –ø–ª–µ—á –º–∏–Ω/–º–∞–∫—Å | –î–∏–∞–ø–∞–∑–æ–Ω –≤ —Å–º | 42/44 |
| ... | –î—Ä—É–≥–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã | ... |

---

## –≠–¢–ê–ü–´ –ò–ù–¢–ï–ì–†–ê–¶–ò–ò

## –≠—Ç–∞–ø 1: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Google Sheets API

### 1.1 –°–æ–∑–¥–∞–Ω–∏–µ Google Cloud –ø—Ä–æ–µ–∫—Ç–∞
1. –ü–µ—Ä–µ–π—Ç–∏ –≤ [Google Cloud Console](https://console.cloud.google.com/)
2. –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç –∏–ª–∏ –≤—ã–±—Ä–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π
3. –í–∫–ª—é—á–∏—Ç—å Google Sheets API –∏ Google Drive API
4. –°–æ–∑–¥–∞—Ç—å Service Account
5. –°–∫–∞—á–∞—Ç—å JSON –∫–ª—é—á

### 1.2 –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Google Sheets
1. –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é —Ç–∞–±–ª–∏—Ü—É Google Sheets
2. –°–æ–∑–¥–∞—Ç—å 3 –ª–∏—Å—Ç–∞: "–ö–∞—Ç–µ–≥–æ—Ä–∏–∏", "–¢–æ–≤–∞—Ä—ã", "–†–∞–∑–º–µ—Ä—ã"
3. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –∑–∞–≥–æ–ª–æ–≤–∫–∏ —Å—Ç–æ–ª–±—Ü–æ–≤ —Å–æ–≥–ª–∞—Å–Ω–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–µ –≤—ã—à–µ
4. –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–∏—Ç—å –¥–æ—Å—Ç—É–ø Service Account –∫ —Ç–∞–±–ª–∏—Ü–µ

### 1.3 –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
```env
# Google Sheets
GOOGLE_SHEETS_CREDENTIALS_PATH=config/credentials.json
GOOGLE_SHEETS_SPREADSHEET_ID=your_spreadsheet_id_here
```

---

## –≠—Ç–∞–ø 2: –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ Backend –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –∏–∑ –¥–æ–Ω–æ—Ä–∞

### 2.1 –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
```bash
# –í server/requirements.txt –¥–æ–±–∞–≤–∏—Ç—å:
gspread>=5.7.0
google-auth>=2.16.0
cachetools>=5.2.0
```

### 2.2 –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ Google Sheets —Å–µ—Ä–≤–∏—Å–∞

**–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Ñ–∞–π–ª:** `fitting_bot/api/services/sheets.py` ‚Üí `server/app/services/sheets_service.py`

–û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ —Å–µ—Ä–≤–∏—Å–∞:
- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Google Sheets API
- –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö (TTL –∫–µ—à)
- –ú–∞–ø–ø–∏–Ω–≥ —Ä—É—Å—Å–∫–∏—Ö –Ω–∞–∑–≤–∞–Ω–∏–π —Å—Ç–æ–ª–±—Ü–æ–≤ –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–∏–µ –∫–ª—é—á–∏
- –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è Google Drive URL –≤ –ø—Ä—è–º—ã–µ —Å—Å—ã–ª–∫–∏
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∏ fallback –Ω–∞ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

### 2.3 –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ API endpoints

**–°–æ–∑–¥–∞—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É:**
```
server/app/features/catalog/
‚îú‚îÄ‚îÄ __init__.py
‚îú‚îÄ‚îÄ routes.py      # –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∏–∑ fitting_bot/api/routers/catalog.py
‚îî‚îÄ‚îÄ favorites.py   # –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∏–∑ fitting_bot/api/routers/favorites.py
```

**–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å—Ö–µ–º—ã:**
- –ò–∑ `fitting_bot/api/schemas.py` —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∫–ª–∞—Å—Å—ã: `Product`, `Category`, `FavoriteCreate`, `FavoriteResponse`

**–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –º–æ–¥–µ–ª–∏:**
- –ò–∑ `fitting_bot/api/models.py` —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∫–ª–∞—Å—Å—ã: `User`, `Favorite`, `UserMeasurement`

### 2.4 –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —Ä–æ—É—Ç–µ—Ä–æ–≤

**–§–∞–π–ª:** `server/main.py` (–¥–æ–±–∞–≤–∏—Ç—å –∏–º–ø–æ—Ä—Ç –∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é)

```python
from app.features.catalog.routes import router as catalog_router
from app.features.catalog.favorites import router as favorites_router

# –í —Å–µ–∫—Ü–∏–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ —Ä–æ—É—Ç–µ—Ä–æ–≤:
app.include_router(catalog_router, prefix="/api")
app.include_router(favorites_router, prefix="/api")
```

---

## –≠—Ç–∞–ø 3: –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ Bot –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –∏–∑ –¥–æ–Ω–æ—Ä–∞

### 3.1 –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ API –∫–ª–∏–µ–Ω—Ç–∞

**–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Ñ–∞–π–ª:** `fitting_bot/bot/utils/api_client.py` ‚Üí `bot/api/client.py`

–û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –∫–ª–∏–µ–Ω—Ç–∞:
- –î–µ–∫–æ—Ä–∞—Ç–æ—Ä –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫ API
- –ú–µ—Ç–æ–¥—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∫–∞—Ç–∞–ª–æ–≥–æ–º, –∏–∑–±—Ä–∞–Ω–Ω—ã–º, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ HTTP —Å–µ—Å—Å–∏—è–º–∏
- –¢–∞–π–º–∞—É—Ç—ã –∏ retry –ª–æ–≥–∏–∫–∞

### 3.2 –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤

**–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Ñ–∞–π–ª—ã:**
- `fitting_bot/bot/handlers/catalog.py` ‚Üí `bot/handlers/catalog.py`
- `fitting_bot/bot/handlers/favorites.py` ‚Üí `bot/handlers/favorites.py`

–û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤:
- –ù–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º –∏ —Ç–æ–≤–∞—Ä–∞–º
- –ü—Ä–æ—Å–º–æ—Ç—Ä –≤—Å–µ—Ö —Ñ–æ—Ç–æ —Ç–æ–≤–∞—Ä–∞
- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ/—É–¥–∞–ª–µ–Ω–∏–µ –∏–∑ –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å–∏—Å—Ç–µ–º–æ–π —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π —Ä–∞–∑–º–µ—Ä–æ–≤
- –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

### 3.3 –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–ª–∞–≤–∏–∞—Ç—É—Ä

**–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Ñ–∞–π–ª—ã:**
- `fitting_bot/bot/keyboards/catalog.py` ‚Üí `bot/keyboards/catalog.py`
- `fitting_bot/bot/keyboards/main_menu.py` ‚Üí `bot/keyboards/main_menu.py`

–û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –∫–ª–∞–≤–∏–∞—Ç—É—Ä:
- –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –∫–Ω–æ–ø–∫–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–π —Å —ç–º–æ–¥–∑–∏
- –ù–∞–≤–∏–≥–∞—Ü–∏—è –º–µ–∂–¥—É —Ç–æ–≤–∞—Ä–∞–º–∏ (‚óÄÔ∏è/‚ñ∂Ô∏è)
- –ö–Ω–æ–ø–∫–∏ –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å–æ–≤ (WB, Ozon, –ú–∞–≥–∞–∑–∏–Ω)
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏–∑–±—Ä–∞–Ω–Ω—ã–º
- –ö–Ω–æ–ø–∫–∏ –ø—Ä–∏–º–µ—Ä–∫–∏

### 3.4 –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤

**–§–∞–π–ª:** `bot/__main__.py` (–¥–æ–±–∞–≤–∏—Ç—å –∏–º–ø–æ—Ä—Ç –∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é)

```python
from bot.handlers import catalog, favorites

# –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —Ä–æ—É—Ç–µ—Ä–æ–≤
dp.include_router(catalog.router)
dp.include_router(favorites.router)
```

---

## –≠—Ç–∞–ø 4: –°–∏—Å—Ç–µ–º–∞ –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ

### 4.1 –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –º–æ–¥–µ–ª–∏ –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ

**–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∏–∑:** `fitting_bot/api/models.py`

```python
class Favorite(Base):
    """–ú–æ–¥–µ–ª—å –∏–∑–±—Ä–∞–Ω–Ω—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤"""
    __tablename__ = "favorites"

    id = Column(Integer, primary_key=True, index=True, autoincrement=True)
    user_id = Column(BigInteger, ForeignKey("users.tg_id", ondelete="CASCADE"), nullable=False, index=True)
    product_id = Column(String(100), nullable=False)  # ID —Ç–æ–≤–∞—Ä–∞ –∏–∑ Google Sheets
    added_at = Column(DateTime(timezone=True), server_default=func.now(), index=True)

    # Relationships
    user = relationship("User", back_populates="favorites")

    # Constraints
    __table_args__ = (
        UniqueConstraint('user_id', 'product_id', name='unique_user_product'),
    )
```

### 4.2 –°–æ–∑–¥–∞–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–∏

```bash
cd server
alembic revision --autogenerate -m "Add favorites table"
alembic upgrade head
```

### 4.3 –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ API endpoints –¥–ª—è –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ

**–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å:** `fitting_bot/api/routers/favorites.py` ‚Üí `server/app/features/catalog/favorites.py`

–û—Å–Ω–æ–≤–Ω—ã–µ endpoints:
- `POST /api/favorites/` - –¥–æ–±–∞–≤–∏—Ç—å –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ
- `DELETE /api/favorites/{user_tg_id}/{product_id}` - —É–¥–∞–ª–∏—Ç—å –∏–∑ –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ
- `GET /api/favorites/{user_tg_id}` - –ø–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ
- `GET /api/favorites/{user_tg_id}/check/{product_id}` - –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ

---

## –≠—Ç–∞–ø 5: –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

### 5.1 –°–∏—Å—Ç–µ–º–∞ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π —Ä–∞–∑–º–µ—Ä–æ–≤

**–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Ñ–∞–π–ª—ã:**
- `fitting_bot/api/services/size_matcher.py` ‚Üí `server/app/services/size_matcher.py`
- `fitting_bot/api/routers/size_recommend.py` ‚Üí `server/app/features/catalog/size_recommend.py`

### 5.2 –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

**–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Ñ–∞–π–ª—ã:**
- `fitting_bot/bot/utils/image_processor.py` ‚Üí `bot/utils/image_processor.py`
- `fitting_bot/bot/services/photo_preloader.py` ‚Üí `bot/services/photo_preloader.py`

### 5.3 –ú–æ–¥–µ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

**–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∏–∑:** `fitting_bot/api/models.py`

```python
class User(Base):
    """–ú–æ–¥–µ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è"""
    __tablename__ = "users"

    id = Column(Integer, primary_key=True, index=True, autoincrement=True)
    tg_id = Column(BigInteger, unique=True, nullable=False, index=True)
    username = Column(String(255), nullable=True)
    first_name = Column(String(255), nullable=True)
    created_at = Column(DateTime(timezone=True), server_default=func.now(), index=True)
    last_activity = Column(DateTime(timezone=True), server_default=func.now(), onupdate=func.now(), index=True)
    is_admin = Column(Boolean, default=False, nullable=False)

    # Relationships
    measurements = relationship("UserMeasurement", back_populates="user", uselist=False, cascade="all, delete-orphan")
    favorites = relationship("Favorite", back_populates="user", cascade="all, delete-orphan")

class UserMeasurement(Base):
    """–ú–æ–¥–µ–ª—å –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ —Ç–µ–ª–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è"""
    __tablename__ = "user_measurements"

    id = Column(Integer, primary_key=True, index=True, autoincrement=True)
    user_id = Column(BigInteger, ForeignKey("users.tg_id", ondelete="CASCADE"), unique=True, nullable=False)

    # –í—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã
    russian_size = Column(String(20), nullable=True)
    shoulder_length = Column(Integer, nullable=True)
    back_width = Column(Integer, nullable=True)
    sleeve_length = Column(Integer, nullable=True)
    back_length = Column(Integer, nullable=True)
    chest = Column(Integer, nullable=True)
    waist = Column(Integer, nullable=True)
    hips = Column(Integer, nullable=True)
    pants_length = Column(Integer, nullable=True)
    waist_girth = Column(Integer, nullable=True)
    rise_height = Column(Integer, nullable=True)
    back_rise_height = Column(Integer, nullable=True)

    updated_at = Column(DateTime(timezone=True), server_default=func.now(), onupdate=func.now())

    # Relationships
    user = relationship("User", back_populates="measurements")
```

---

## –≠—Ç–∞–ø 6: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### 6.1 –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ Google Sheets

**–õ–∏—Å—Ç "–ö–∞—Ç–µ–≥–æ—Ä–∏–∏":**
```
ID | –ù–∞–∑–≤–∞–Ω–∏–µ | –ü–æ—Ä—è–¥–æ–∫ | –≠–º–æ–¥–∑–∏
1  | –í–µ—Ä—Ö–Ω—è—è –æ–¥–µ–∂–¥–∞ | 1 | üëî
2  | –ü–ª–∞—Ç—å—è | 2 | üëó
3  | –û–±—É–≤—å | 3 | üëü
```

**–õ–∏—Å—Ç "–¢–æ–≤–∞—Ä—ã":**
```
ID —Ç–æ–≤–∞—Ä–∞ | –ö–∞—Ç–µ–≥–æ—Ä–∏—è | –ù–∞–∑–≤–∞–Ω–∏–µ | –û–ø–∏—Å–∞–Ω–∏–µ | –†–∞–∑–º–µ—Ä—ã | OZON | –°—Å—ã–ª–∫–∞ | –§–æ—Ç–æ 1 | –ö–æ–ª–ª–∞–∂ | –ê–∫—Ç–∏–≤–µ–Ω
12345 | 1 | –ü–∏–¥–∂–∞–∫ –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π | –°—Ç–∏–ª—å–Ω—ã–π –ø–∏–¥–∂–∞–∫ –¥–ª—è –æ—Ñ–∏—Å–∞ | S,M,L,XL | ozon_123 | https://shop.com | https://drive.google.com/... | https://drive.google.com/... | –î–ê
67890 | 2 | –ü–ª–∞—Ç—å–µ –ª–µ—Ç–Ω–µ–µ | –õ–µ–≥–∫–æ–µ –ª–µ—Ç–Ω–µ–µ –ø–ª–∞—Ç—å–µ | XS,S,M,L | ozon_456 | https://shop.com | https://drive.google.com/... | https://drive.google.com/... | –î–ê
```

### 6.2 –ü—Ä–æ–≤–µ—Ä–∫–∞ API endpoints

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
curl http://localhost:8002/api/catalog/categories

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç–æ–≤–∞—Ä—ã –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
curl http://localhost:8002/api/catalog/products?category=1

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Ç–æ–≤–∞—Ä
curl http://localhost:8002/api/catalog/products/12345

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏–∑–±—Ä–∞–Ω–Ω–æ–µ
curl http://localhost:8002/api/favorites/123456789
```

### 6.3 –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ –±–æ—Ç–µ

1. –ó–∞–ø—É—Å—Ç–∏—Ç—å –±–æ—Ç–∞: `python -m bot`
2. –ù–∞–∂–∞—Ç—å "üõç –ö–∞—Ç–∞–ª–æ–≥" –≤ –≥–ª–∞–≤–Ω–æ–º –º–µ–Ω—é
3. –î–æ–ª–∂–Ω—ã –ø–æ—è–≤–∏—Ç—å—Å—è –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ —Å —ç–º–æ–¥–∑–∏
4. –í—ã–±—Ä–∞—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏—é
5. –î–æ–ª–∂–µ–Ω –ø–æ–∫–∞–∑–∞—Ç—å—Å—è –ø–µ—Ä–≤—ã–π —Ç–æ–≤–∞—Ä —Å —Ñ–æ—Ç–æ –∏ –æ–ø–∏—Å–∞–Ω–∏–µ–º
6. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–≤–∏–≥–∞—Ü–∏—é –º–µ–∂–¥—É —Ç–æ–≤–∞—Ä–∞–º–∏ (‚óÄÔ∏è/‚ñ∂Ô∏è)
7. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ (‚≠êÔ∏è)
8. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–µ—Ä–µ—Ö–æ–¥ –ø–æ —Å—Å—ã–ª–∫–∞–º –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å–æ–≤

---

## –ß–ï–ö–õ–ò–°–¢ –ò–ù–¢–ï–ì–†–ê–¶–ò–ò

### Backend (–ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–∑ –¥–æ–Ω–æ—Ä–∞):
- [x] –°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω `fitting_bot/api/services/sheets.py` ‚Üí `server/app/services/sheets_service.py`
- [x] –°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω `fitting_bot/api/routers/catalog.py` ‚Üí `server/app/features/catalog/routes.py`
- [x] –°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω `fitting_bot/api/routers/favorites.py` ‚Üí `server/app/features/catalog/favorites.py`
- [x] –°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω—ã —Å—Ö–µ–º—ã –∏–∑ `fitting_bot/api/schemas.py`
- [x] –°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω—ã –º–æ–¥–µ–ª–∏ –∏–∑ `fitting_bot/api/models.py`
- [x] –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏: `gspread`, `google-auth`, `cachetools`
- [x] –ù–∞—Å—Ç—Ä–æ–µ–Ω—ã –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è Google Sheets
- [x] –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã —Ä–æ—É—Ç–µ—Ä—ã –≤ `main.py`
- [x] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã API endpoints

### Bot –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è (–ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–∑ –¥–æ–Ω–æ—Ä–∞):
- [x] –°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω `fitting_bot/bot/utils/api_client.py` ‚Üí `bot/api/client.py`
- [x] –°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω `fitting_bot/bot/handlers/catalog.py` ‚Üí `bot/handlers/catalog.py`
- [x] –°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω `fitting_bot/bot/handlers/favorites.py` ‚Üí `bot/handlers/favorites.py`
- [x] –°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω `fitting_bot/bot/keyboards/catalog.py` ‚Üí `bot/keyboards/catalog.py`
- [x] –û–±–Ω–æ–≤–ª–µ–Ω `bot/keyboards/keyboards.py` (–¥–æ–±–∞–≤–ª–µ–Ω–∞ –∫–Ω–æ–ø–∫–∞ –∫–∞—Ç–∞–ª–æ–≥–∞)
- [x] –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –≤ `__main__.py`
- [x] –î–æ–±–∞–≤–ª–µ–Ω –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ `catalog_main` –¥–ª—è –≥–ª–∞–≤–Ω–æ–≥–æ –º–µ–Ω—é
- [x] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∞ –Ω–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ –∫–∞—Ç–∞–ª–æ–≥—É (–≥–æ—Ç–æ–≤–æ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é —Å –¥–∞–Ω–Ω—ã–º–∏)

### –°–∏—Å—Ç–µ–º–∞ –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ:
- [x] –°–æ–∑–¥–∞–Ω–∞ –º–æ–¥–µ–ª—å `Favorite`
- [ ] –°–æ–∑–¥–∞–Ω–∞ –∏ –ø—Ä–∏–º–µ–Ω–µ–Ω–∞ –º–∏–≥—Ä–∞—Ü–∏—è (—Ç—Ä–µ–±—É–µ—Ç—Å—è –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏)
- [x] –°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω—ã API endpoints –¥–ª—è –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ/—É–¥–∞–ª–µ–Ω–∏–µ –∏–∑ –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ (—Ç—Ä–µ–±—É–µ—Ç—Å—è —Å –¥–∞–Ω–Ω—ã–º–∏)
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω –ø—Ä–æ—Å–º–æ—Ç—Ä –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ (—Ç—Ä–µ–±—É–µ—Ç—Å—è —Å –¥–∞–Ω–Ω—ã–º–∏)

### Google Sheets –Ω–∞—Å—Ç—Ä–æ–π–∫–∞:
- [x] –°–æ–∑–¥–∞–Ω Google Cloud –ø—Ä–æ–µ–∫—Ç
- [x] –í–∫–ª—é—á–µ–Ω—ã Google Sheets API –∏ Google Drive API
- [x] –°–æ–∑–¥–∞–Ω Service Account –∏ —Å–∫–∞—á–∞–Ω JSON –∫–ª—é—á
- [x] –ù–∞—Å—Ç—Ä–æ–µ–Ω—ã –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
- [ ] –î–æ–±–∞–≤–ª–µ–Ω—ã —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ Google Sheets (—Ç—Ä–µ–±—É–µ—Ç—Å—è –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è)

### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):
- [ ] –°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π —Ä–∞–∑–º–µ—Ä–æ–≤
- [ ] –°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- [ ] –°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω—ã –º–æ–¥–µ–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
- [ ] –ù–∞—Å—Ç—Ä–æ–µ–Ω–∞ –ø—Ä–µ–¥–∑–∞–≥—Ä—É–∑–∫–∞ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π

---

## ‚úÖ –ò–ù–¢–ï–ì–†–ê–¶–ò–Ø –ó–ê–í–ï–†–®–ï–ù–ê

**–í—Å–µ –æ—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∫–∞—Ç–∞–ª–æ–≥–∞ —Ç–æ–≤–∞—Ä–æ–≤ —É—Å–ø–µ—à–Ω–æ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω—ã!**

–°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é. –î–ª—è –ø–æ–ª–Ω–æ–≥–æ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è —Ç—Ä–µ–±—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –¥–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ Google Sheets —Ç–∞–±–ª–∏—Ü—É.

---

## –í–û–ó–ú–û–ñ–ù–´–ï –ü–†–û–ë–õ–ï–ú–´ –ò –†–ï–®–ï–ù–ò–Ø

### 1. –û—à–∏–±–∫–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ Google Sheets
**–ü—Ä–æ–±–ª–µ–º–∞:** `google.auth.exceptions.DefaultCredentialsError`
**–†–µ—à–µ–Ω–∏–µ:** 
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—É—Ç—å –∫ JSON –∫–ª—é—á—É –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π `GOOGLE_SHEETS_CREDENTIALS_PATH`
- –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ Service Account –∏–º–µ–µ—Ç –¥–æ—Å—Ç—É–ø –∫ —Ç–∞–±–ª–∏—Ü–µ (Share ‚Üí Add people)
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å `GOOGLE_SHEETS_SPREADSHEET_ID`

### 2. –ü—É—Å—Ç—ã–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –∏–ª–∏ —Ç–æ–≤–∞—Ä—ã
**–ü—Ä–æ–±–ª–µ–º–∞:** API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø—É—Å—Ç–æ–π —Å–ø–∏—Å–æ–∫
**–†–µ—à–µ–Ω–∏–µ:**
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–∑–≤–∞–Ω–∏—è –ª–∏—Å—Ç–æ–≤ –≤ Google Sheets (–¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —Ç–æ—á–Ω–æ "–ö–∞—Ç–µ–≥–æ—Ä–∏–∏", "–¢–æ–≤–∞—Ä—ã", "–†–∞–∑–º–µ—Ä—ã")
- –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –∑–∞–≥–æ–ª–æ–≤–∫–∏ —Å—Ç–æ–ª–±—Ü–æ–≤ —Ç–æ—á–Ω–æ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç –º–∞–ø–ø–∏–Ω–≥—É –≤ `sheets.py`
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –≤ —Ç–∞–±–ª–∏—Ü–µ –µ—Å—Ç—å –¥–∞–Ω–Ω—ã–µ –∏ —Å—Ç–æ–ª–±–µ—Ü "–ê–∫—Ç–∏–≤–µ–Ω" = "–î–ê"

### 3. –ù–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è —Ñ–æ—Ç–æ —Ç–æ–≤–∞—Ä–æ–≤
**–ü—Ä–æ–±–ª–µ–º–∞:** –§–æ—Ç–æ –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –≤ Telegram
**–†–µ—à–µ–Ω–∏–µ:**
- –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ —Å—Å—ã–ª–∫–∏ Google Drive –ø—É–±–ª–∏—á–Ω—ã–µ (Anyone with the link can view)
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏—é `convert_google_drive_url` –≤ `sheets.py`
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä—è–º—ã–µ —Å—Å—ã–ª–∫–∏ –≤–º–µ—Å—Ç–æ Google Drive, –µ—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã –ø—Ä–æ–¥–æ–ª–∂–∞—é—Ç—Å—è

### 4. –û—à–∏–±–∫–∏ –∏–º–ø–æ—Ä—Ç–∞ –ø–æ—Å–ª–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è
**–ü—Ä–æ–±–ª–µ–º–∞:** `ModuleNotFoundError` –∏–ª–∏ `ImportError`
**–†–µ—à–µ–Ω–∏–µ:**
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å –ø—É—Ç–µ–π –∏–º–ø–æ—Ä—Ç–∞ –≤ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Ñ–∞–π–ª–∞—Ö
- –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã
- –°–æ–∑–¥–∞—Ç—å –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–µ `__init__.py` —Ñ–∞–π–ª—ã

### 5. –ú–µ–¥–ª–µ–Ω–Ω–∞—è —Ä–∞–±–æ—Ç–∞ –∫–∞—Ç–∞–ª–æ–≥–∞
**–ü—Ä–æ–±–ª–µ–º–∞:** –î–æ–ª–≥–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–π/—Ç–æ–≤–∞—Ä–æ–≤
**–†–µ—à–µ–Ω–∏–µ:**
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è –≤ `sheets.py`
- –£–≤–µ–ª–∏—á–∏—Ç—å –≤—Ä–µ–º—è –∂–∏–∑–Ω–∏ –∫–µ—à–∞ (TTL)
- –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∑–∞–ø—Ä–æ—Å—ã –∫ Google Sheets API
- –†–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å –ø–µ—Ä–µ—Ö–æ–¥ –Ω–∞ –ª–æ–∫–∞–ª—å–Ω—É—é –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö

### 6. –û—à–∏–±–∫–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ
**–ü—Ä–æ–±–ª–µ–º–∞:** –û—à–∏–±–∫–∏ –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å —Ç–∞–±–ª–∏—Ü–µ–π `favorites`
**–†–µ—à–µ–Ω–∏–µ:**
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –º–∏–≥—Ä–∞—Ü–∏—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∞: `alembic upgrade head`
- –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ —Ç–∞–±–ª–∏—Ü–∞ `users` —Å—É—â–µ—Å—Ç–≤—É–µ—Ç (–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –¥–ª—è `favorites`)
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å Foreign Key —Å–≤—è–∑–µ–π

---

## –°–¢–†–£–ö–¢–£–†–ê –§–ê–ô–õ–û–í –ü–û–°–õ–ï –ò–ù–¢–ï–ì–†–ê–¶–ò–ò

```
server/
‚îú‚îÄ‚îÄ app/
‚îÇ   ‚îú‚îÄ‚îÄ services/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ sheets_service.py          # –°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ –∏–∑ –¥–æ–Ω–æ—Ä–∞
‚îÇ   ‚îú‚îÄ‚îÄ features/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ catalog/
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ routes.py              # –°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ –∏–∑ –¥–æ–Ω–æ—Ä–∞
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ favorites.py           # –°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ –∏–∑ –¥–æ–Ω–æ—Ä–∞
‚îÇ   ‚îî‚îÄ‚îÄ models/
‚îÇ       ‚îú‚îÄ‚îÄ user.py                    # –°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ –∏–∑ –¥–æ–Ω–æ—Ä–∞
‚îÇ       ‚îî‚îÄ‚îÄ favorite.py                # –°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ –∏–∑ –¥–æ–Ω–æ—Ä–∞

bot/
‚îú‚îÄ‚îÄ api/
‚îÇ   ‚îî‚îÄ‚îÄ client.py                      # –°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ –∏–∑ –¥–æ–Ω–æ—Ä–∞
‚îú‚îÄ‚îÄ handlers/
‚îÇ   ‚îú‚îÄ‚îÄ catalog.py                     # –°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ –∏–∑ –¥–æ–Ω–æ—Ä–∞
‚îÇ   ‚îî‚îÄ‚îÄ favorites.py                   # –°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ –∏–∑ –¥–æ–Ω–æ—Ä–∞
‚îú‚îÄ‚îÄ keyboards/
‚îÇ   ‚îú‚îÄ‚îÄ catalog.py                     # –°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ –∏–∑ –¥–æ–Ω–æ—Ä–∞
‚îÇ   ‚îî‚îÄ‚îÄ main_menu.py                   # –°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ –∏–∑ –¥–æ–Ω–æ—Ä–∞
‚îî‚îÄ‚îÄ utils/
    ‚îî‚îÄ‚îÄ image_processor.py             # –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ –∏–∑ –¥–æ–Ω–æ—Ä–∞

config/
‚îî‚îÄ‚îÄ credentials.json                   # Google Sheets Service Account –∫–ª—é—á
```

---

## –ó–ê–ö–õ–Æ–ß–ï–ù–ò–ï

–î–∞–Ω–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –ø–æ–ª–Ω—É—é –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é –∫–∞—Ç–∞–ª–æ–≥–∞ —Ç–æ–≤–∞—Ä–æ–≤ –∏–∑ –±–æ—Ç–∞-–¥–æ–Ω–æ—Ä–∞ (`fitting_bot`) –≤ –æ—Å–Ω–æ–≤–Ω–æ–π WB-–±–æ—Ç –ø—É—Ç–µ–º **–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤**. 

### –ß—Ç–æ –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –ø–æ—Å–ª–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏:

**–ö–∞—Ç–∞–ª–æ–≥ —Ç–æ–≤–∞—Ä–æ–≤:**
- –ü—Ä–æ—Å–º–æ—Ç—Ä –∫–∞—Ç–µ–≥–æ—Ä–∏–π —Å —ç–º–æ–¥–∑–∏
- –ù–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ —Ç–æ–≤–∞—Ä–∞–º –≤ –∫–∞—Ç–µ–≥–æ—Ä–∏—è—Ö (‚óÄÔ∏è/‚ñ∂Ô∏è)
- –ü—Ä–æ—Å–º–æ—Ç—Ä –¥–µ—Ç–∞–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Ç–æ–≤–∞—Ä–∞—Ö
- –ü—Ä–æ—Å–º–æ—Ç—Ä –≤—Å–µ—Ö —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π —Ç–æ–≤–∞—Ä–∞
- –ü–µ—Ä–µ—Ö–æ–¥—ã –Ω–∞ –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å—ã (WB, Ozon, –ú–∞–≥–∞–∑–∏–Ω)

**–°–∏—Å—Ç–µ–º–∞ –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ:**
- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–æ–≤ –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ (‚≠êÔ∏è)
- –£–¥–∞–ª–µ–Ω–∏–µ –∏–∑ –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ (‚ùå)
- –ü—Ä–æ—Å–º–æ—Ç—Ä —Å–ø–∏—Å–∫–∞ –∏–∑–±—Ä–∞–Ω–Ω—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤
- –ù–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ –∏–∑–±—Ä–∞–Ω–Ω–æ–º—É

**–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:**
- –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö Google Sheets (TTL –∫–µ—à)
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ API –∏ fallback –Ω–∞ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
- –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- –°–∏—Å—Ç–µ–º–∞ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π —Ä–∞–∑–º–µ—Ä–æ–≤ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- –ü—Ä–µ–¥–∑–∞–≥—Ä—É–∑–∫–∞ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –ø–æ–¥—Ö–æ–¥–∞ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è:

1. **–ü—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–π –∫–æ–¥** - –≤—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —É–∂–µ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã –≤ –¥–æ–Ω–æ—Ä–µ
2. **–ü–æ–ª–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å** - –∫–æ–ø–∏—Ä—É–µ—Ç—Å—è –≤–µ—Å—å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –±–µ–∑ –ø–æ—Ç–µ—Ä—å
3. **–ë—ã—Å—Ç—Ä–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è** - –Ω–µ –Ω—É–∂–Ω–æ –ø–∏—Å–∞—Ç—å –∫–æ–¥ —Å –Ω—É–ª—è
4. **–°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å** - –≤—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Ä–∞–±–æ—Ç–∞—é—Ç –≤–º–µ—Å—Ç–µ
5. **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å** - —Å–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—é

### –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:

1. –í—ã–ø–æ–ª–Ω–∏—Ç—å –≤—Å–µ –ø—É–Ω–∫—Ç—ã —á–µ–∫–ª–∏—Å—Ç–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
2. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –≤ —Ç–µ—Å—Ç–æ–≤–æ–π —Å—Ä–µ–¥–µ
3. –î–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ Google Sheets
4. –†–∞–∑–≤–µ—Ä–Ω—É—Ç—å –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ
5. –ú–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∏ –æ—à–∏–±–∫–∏

–°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –∏ –º–æ–∂–µ—Ç –±—ã—Ç—å —Ä–∞—Å—à–∏—Ä–µ–Ω–∞ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–º —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–æ–º –ø–æ –º–µ—Ä–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏.